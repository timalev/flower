"use strict";(self.webpackChunkflowervalley=self.webpackChunkflowervalley||[]).push([[599],{7599:(ht,$,f)=>{f.r($),f.d($,{CartModule:()=>Ke});var h=f(9808),D=f(2535),z=f(5330),W=f(4128),t=f(5e3),A=f(6824),G=f(9020),O=f(2260),M=f(9783),J=f(5055),F=f(7632),nt=f(3710),L=f(8850),N=f(845),it=f(7582),j=f(2722),K=f(7579),X=f(8812),tt=f(4297),q=f(4255),ot=f(7780),y=f(3075),V=f(6497);function rt(o,r){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"\u0422\u043e\u0432\u0430\u0440"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"\u0426\u0435\u043d\u0430"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t._UZ(9,"th"),t.qZA())}function st(o,r){if(1&o&&(t.TgZ(0,"tr",18)(1,"td",19),t._uU(2),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",(null==e.category?null:e.category.name)||"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430"," ")}}function lt(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"priceConverter"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,e.initialPrice,"two","rub"))}}const ut=function(){return{"border-radius":"10px","object-fit":"cover"}};function ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",20)(1,"td",21),t._UZ(2,"p-image",22),t.TgZ(3,"div")(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span",23),t._uU(7),t.ALo(8,"priceConverter"),t.qZA()()(),t.TgZ(9,"td",24)(10,"div")(11,"span"),t._uU(12),t.ALo(13,"priceConverter"),t.qZA(),t.YNc(14,lt,3,5,"span",9),t.qZA()(),t.TgZ(15,"td",25)(16,"p-inputNumber",26,27),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.count=i})("ngModelChange",function(){const d=t.CHM(e).$implicit;return t.oxw().updateCount(d)})("onBlur",function(){const d=t.CHM(e).$implicit,g=t.MAs(17);return t.oxw().changeCount(d,g.value)}),t.qZA()(),t.TgZ(18,"td",28),t._uU(19),t.ALo(20,"priceConverter"),t.qZA(),t.TgZ(21,"td",29)(22,"div",30)(23,"span",31),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().removeItem(d.id)}),t.qZA()()()()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",e.photos[0].src)("alt",e.name)("imageStyle",t.DdM(24,ut)),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(t.Dn7(8,12,e.price,"two","rub")),t.xp6(5),t.Oqu(t.Dn7(13,16,e.price,"two","rub")),t.xp6(2),t.Q6J("ngIf",e.initialPrice!==e.price),t.xp6(2),t.Q6J("ngModel",e.count)("min",n.getStep(e))("showButtons",!0)("step",n.getStep(e)),t.xp6(3),t.hij(" ",t.Dn7(20,20,e.price*e.count,"two","rub")," ")}}function pt(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(null==e.cartContent?null:e.cartContent.boxesNotice)}}function dt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",32),t.NdJ("onClick",function(){t.CHM(e);const i=t.oxw();return i.genBoxes(),i.isBoxButtonClicked=!0}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("loading",e.isLoading)}}function ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",33),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().removeBoxes()}),t.qZA()}}function mt(o,r){1&o&&(t.TgZ(0,"tr"),t._UZ(1,"th",36)(2,"th",37)(3,"th",38)(4,"th",37)(5,"th"),t.qZA())}function _t(o,r){if(1&o&&(t.TgZ(0,"tr",39)(1,"td",21)(2,"div",40),t._UZ(3,"p-image",41),t.qZA(),t.TgZ(4,"div")(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"span",23),t._uU(8),t.ALo(9,"priceConverter"),t.qZA()()(),t.TgZ(10,"td",24),t._uU(11),t.ALo(12,"priceConverter"),t.qZA(),t.TgZ(13,"td",25)(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"td",28),t._uU(17),t.ALo(18,"priceConverter"),t.qZA(),t._UZ(19,"td"),t.qZA()),2&o){const e=r.$implicit;t.xp6(6),t.Oqu(e.name),t.xp6(2),t.Oqu(t.Dn7(9,5,e.price,"two","rub")),t.xp6(3),t.Oqu(t.Dn7(12,9,e.price,"two","rub")),t.xp6(4),t.Oqu(e.count),t.xp6(2),t.hij(" ",t.Dn7(18,13,e.price*e.count,"two","rub")," ")}}function gt(o,r){if(1&o&&(t.TgZ(0,"div",34)(1,"p-table",35),t.YNc(2,mt,6,0,"ng-template",1),t.YNc(3,_t,20,17,"ng-template",3),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("value",e.boxes)}}function bt(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"priceConverter"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(t.Dn7(2,1,e.getInitialSum,"two","rub"))}}function a(o,r){if(1&o&&(t.TgZ(0,"div",42)(1,"span"),t._uU(2),t.ALo(3,"priceConverter"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"priceConverter"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.hij("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 ",t.Dn7(3,2,e.cartVariables.minOrderSum,"none","RUB"),""),t.xp6(3),t.hij("\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ",t.Dn7(6,6,e.getDifference,"none","RUB"),"")}}let s=class{constructor(r,e,n){this.cartService=r,this.boxService=e,this.ms=n,this.goods=[],this.boxes=[],this.isLoading=!1,this.isBoxesAutoGen=!1,this.isBoxButtonClicked=!1}ngOnInit(){this.cartService.cartUpdate().pipe((0,j.R)(this.componentDestroy())).subscribe(r=>{this.goods=r,this.genTulipBoxes(),this.boxes.length&&this.isBoxButtonClicked&&this.genBoxes()}),this.boxService.getBoxes().pipe((0,j.R)(this.componentDestroy())).subscribe(r=>{this.boxes=r,this.isLoading=!1})}ngOnDestroy(){}get getSum(){let r=0;return this.goods.map(e=>r+=e.price*e.count),r}get getInitialSum(){let r=0;return this.goods.map(e=>r+=e.initialPrice*e.count),r}get getDifference(){var r;const e=null===(r=this.cartVariables)||void 0===r?void 0:r.minOrderSum;if(e){const n=e-this.getSum;return n>0?n:0}return null}updateCount(r){this.cartService.updateCount(r)}getStep(r){return r.coefficient?Number(r.coefficient):1}changeCount(r,e){const n=this.getStep(r);e<n?r.count=n:e/n!=0&&(r.count=Math.round(e/n)*n),this.cartService.updateCount(r)}removeItem(r){this.cartService.removeFromCart(r)}genBoxes(r){r||(this.isLoading=!0),this.boxService.genBoxes(r||this.goods)}genTulipBoxes(){const r=this.goods.filter(e=>{var n;return 1===(null===(n=e.category)||void 0===n?void 0:n.id)});if(r.length){let e=0;r.map(n=>{e+=n.count}),e>=500?(this.isBoxesAutoGen||this.ms.add({severity:"warn",summary:"\u041a\u043e\u0440\u043e\u0431\u043a\u0438 \u043f\u043e\u0434 \u0442\u044e\u043b\u044c\u043f\u0430\u043d \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b",detail:"\u041f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0435 \u0442\u044e\u043b\u044c\u043f\u0430\u043d\u043e\u0432 \u043e\u0442 500 \u0448\u0442., \u043a\u043e\u0440\u043e\u0431\u043a\u0438 \u041e\u0411\u042f\u0417\u0410\u0422\u0415\u041b\u042c\u041d\u042b",life:1e4}),this.isBoxesAutoGen=!0,this.genBoxes(r)):(this.isBoxesAutoGen&&!this.isBoxButtonClicked&&this.boxes.length&&this.removeBoxes(),this.isBoxesAutoGen=!1)}else this.isBoxesAutoGen=!1}removeBoxes(){this.boxService.removeBoxes(),this.boxes=[],this.genTulipBoxes(),this.isBoxButtonClicked=!1}};s.\u0275fac=function(r){return new(r||s)(t.Y36(A.N),t.Y36(X.r),t.Y36(M.ez))},s.\u0275cmp=t.Xpm({type:s,selectors:[["flower-valley-cart-goods"]],inputs:{cartVariables:"cartVariables",cartContent:"cartContent"},decls:30,vars:14,consts:[["rowGroupMode","subheader","groupRowsBy","category.id","styleClass","p-table-override",3,"value"],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","body"],["styleClass","ml-3 mb-3","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440","icon","pi pi-plus","routerLink","/catalog"],[1,"boxes"],[1,"boxes__title"],[1,"boxes__content"],[1,"boxes__content_text"],[4,"ngIf"],[1,"boxes__content_button"],["styleClass","p-button-outlined text-normal","label","\u0414\u041e\u0411\u0410\u0412\u0418\u0422\u042c \u041a\u041e\u0420\u041e\u0411\u041a\u0418",3,"loading","onClick",4,"ngIf"],["styleClass","p-button-outlined p-button-danger text-normal","label","\u0423\u0411\u0420\u0410\u0422\u042c \u041a\u041e\u0420\u041e\u0411\u041a\u0418",3,"onClick",4,"ngIf"],["class","boxes__items",4,"ngIf"],[1,"summary-block"],[1,"summary-block__info"],[1,"summary-block__summary"],["class","summary-block__additional",4,"ngIf"],["pRowGroupHeader",""],["colspan","5"],[1,"product"],[1,"product__name"],["width","70px","height","70px",3,"src","alt","imageStyle"],[1,"mobile-price"],[1,"mobile-price-cell"],[1,"product__count"],["buttonLayout","horizontal","inputId","horizontal","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"ngModel","min","showButtons","step","ngModelChange","onBlur"],["countNumber",""],[1,"product__sum"],[1,"product__delete"],[1,"trash"],[1,"pi","pi-trash","cursor-pointer",3,"click"],["styleClass","p-button-outlined text-normal","label","\u0414\u041e\u0411\u0410\u0412\u0418\u0422\u042c \u041a\u041e\u0420\u041e\u0411\u041a\u0418",3,"loading","onClick"],["styleClass","p-button-outlined p-button-danger text-normal","label","\u0423\u0411\u0420\u0410\u0422\u042c \u041a\u041e\u0420\u041e\u0411\u041a\u0418",3,"onClick"],[1,"boxes__items"],["styleClass","p-table-override",3,"value"],["width","600px"],["width","160px"],["width","180px"],[1,"product","boxes"],[1,"product__name_icon"],["styleClass","flex align-items-center justify-content-center","src","assets/icons/box.svg"],[1,"summary-block__additional"]],template:function(r,e){1&r&&(t.TgZ(0,"p-card")(1,"p-table",0),t.YNc(2,rt,10,0,"ng-template",1),t.YNc(3,st,3,1,"ng-template",2),t.YNc(4,ct,24,25,"ng-template",3),t.qZA(),t._UZ(5,"p-button",4),t.TgZ(6,"div",5)(7,"div",6),t._uU(8,"\u041a\u043e\u0440\u043e\u0431\u043a\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u0430\u044f"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8)(11,"span"),t._uU(12),t.qZA(),t.YNc(13,pt,2,1,"span",9),t.qZA(),t.TgZ(14,"div",10),t.YNc(15,dt,1,1,"p-button",11),t.YNc(16,ft,1,0,"p-button",12),t.qZA()(),t.YNc(17,gt,4,1,"div",13),t.qZA(),t.TgZ(18,"div",14)(19,"div",15)(20,"div"),t._uU(21),t.qZA()(),t.TgZ(22,"div",16)(23,"span"),t._uU(24,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0446\u0432\u0435\u0442\u043e\u0432:"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.ALo(27,"priceConverter"),t.qZA(),t.YNc(28,bt,3,5,"span",9),t.qZA(),t.YNc(29,a,7,10,"div",17),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("value",e.goods),t.xp6(11),t.Oqu(null==e.cartContent?null:e.cartContent.boxesTitle),t.xp6(1),t.Q6J("ngIf",e.boxes.length),t.xp6(2),t.Q6J("ngIf",!e.boxes.length||!e.isBoxButtonClicked),t.xp6(1),t.Q6J("ngIf",e.boxes.length&&e.isBoxButtonClicked),t.xp6(1),t.Q6J("ngIf",e.boxes.length),t.xp6(4),t.hij(" ",null==e.cartContent?null:e.cartContent.paymentInfo," "),t.xp6(5),t.Oqu(t.Dn7(27,10,e.getSum,"two","rub")),t.xp6(2),t.Q6J("ngIf",e.getInitialSum!==e.getSum),t.xp6(1),t.Q6J("ngIf",e.getDifference&&e.cartVariables))},directives:[tt.Z,q.iA,M.jx,q.Z5,L.E,h.O5,ot.R,y.JJ,y.On,N.zx,D.rH],pipes:[V.K],styles:['.p-datatable.p-table-override .p-datatable-thead tr th{background-color:#fff;font-weight:500;font-size:16px;line-height:100%;text-transform:uppercase;color:#787878;border:none}  .p-datatable.p-table-override .p-datatable-thead tr th:first-child{width:600px}  .p-datatable.p-table-override .p-datatable-thead tr th:nth-child(2){width:160px}  .p-datatable.p-table-override .p-datatable-thead tr th:nth-child(3){width:180px}  .p-datatable.p-table-override .p-datatable-thead tr th:nth-child(4){width:160px}  .p-datatable.p-table-override .p-datatable-tbody tr.p-rowgroup-header td{padding:1rem 0}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr.p-rowgroup-header td{padding:1rem}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header){display:grid;grid-template-areas:"name name name" "count sum delete";grid-template-rows:50% 50%;grid-auto-columns:40% 50% 10%;grid-gap:10px}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).boxes{grid-auto-columns:30% 70% 0}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).boxes td.product__count,   .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).boxes td.product__sum{display:flex;justify-content:center!important}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).boxes td.product__count,   .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).boxes td.product__sum{display:table-cell}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td{padding:1rem 0;justify-content:flex-start!important;border:none}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td{padding:1rem}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.product__name{grid-area:name}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.product__count{grid-area:count}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.product__sum{grid-area:sum}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.product__delete{grid-area:delete}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td .mobile-price{display:block}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td .mobile-price{display:none}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.mobile-price-cell{display:none!important}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.mobile-price-cell{display:table-cell!important}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.mobile-price-cell>div{display:flex;flex-direction:column}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header) td.mobile-price-cell>div>span:last-child:not(:first-child){color:#ea3b15;text-decoration:line-through}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header){display:table-row}}  .p-datatable.p-table-override .p-datatable-tbody tr:not(.p-rowgroup-header).p-rowgroup-header td{border-top:1px solid rgba(0,0,0,.1);font-weight:400;font-size:14px;line-height:100%;text-transform:uppercase;color:#787878;padding-bottom:0}  .p-datatable.p-table-override .p-datatable-tbody .product__name{display:flex;align-items:center}  .p-datatable.p-table-override .p-datatable-tbody .product__name_icon{display:flex;align-items:center;justify-content:center;border-radius:10px;padding:10px;background-color:#f5f5f5}  .p-datatable.p-table-override .p-datatable-tbody .product__name>div:last-child{margin-left:25px;display:flex;flex-direction:column}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody .product__name>div:last-child{display:block}}  .p-datatable.p-table-override .p-datatable-tbody .product__name>div:last-child>span{font-weight:500;font-size:18px;line-height:100%;color:#3a3a3a}  .p-datatable.p-table-override .p-datatable-tbody .product__name>div:last-child>span.mobile-price{font-size:14px;color:#787878;margin-top:10px}  .p-datatable.p-table-override .p-datatable-tbody .product__count{text-align:center}  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber{width:100px;height:40px}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber{width:auto;height:50px}}  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber input{max-width:45px;font-weight:500;font-size:17.7778px;line-height:110%;text-align:center;padding:0;outline:none!important;box-shadow:none!important;border:1px solid #E6E6E6;color:#3a3a3a}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber input{max-width:70px}}  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber input:focus-visible{outline:3px auto #E6E6E6}  .p-datatable.p-table-override .p-datatable-tbody .product__count   .p-inputnumber .p-button.p-button-icon-only{width:unset;padding:0 5px;min-height:20px;min-width:20px;background-color:#fff;border-color:#e6e6e6;color:#787878}  .p-datatable.p-table-override .p-datatable-tbody .product__sum{font-weight:500;font-size:18px}@media screen and (min-width: 1024px){  .p-datatable.p-table-override .p-datatable-tbody .product__sum{font-weight:400;font-size:14px}}  .p-datatable.p-table-override .p-datatable-tbody .product__delete .trash{display:flex;align-items:center;color:#ea3b1566}  .p-datatable.p-table-override .p-datatable-tbody .product__delete .trash .pi:hover{color:#ea3b15}.boxes[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.1)}.boxes__title[_ngcontent-%COMP%]{padding:1rem;font-weight:400;font-size:14px;line-height:100%;text-transform:uppercase;color:#787878}.boxes__content[_ngcontent-%COMP%]{padding:0 1rem 1rem;display:flex;align-items:center;justify-content:space-between;flex-direction:column}@media screen and (min-width: 1024px){.boxes__content[_ngcontent-%COMP%]{flex-direction:unset}}.boxes__content_text[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:16px;color:#3a3a3a;margin-bottom:20px}@media screen and (min-width: 1024px){.boxes__content_text[_ngcontent-%COMP%]{margin-bottom:unset}}.boxes__content_text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:400;line-height:100%}.boxes__content_text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:not(:first-child){padding-top:10px;font-weight:500;line-height:120%}.boxes__content_button[_ngcontent-%COMP%]{width:100%}@media screen and (min-width: 1024px){.boxes__content_button[_ngcontent-%COMP%]{width:unset}}.boxes__content_button[_ngcontent-%COMP%]     button{width:100%}@media screen and (min-width: 1024px){.boxes__content_button[_ngcontent-%COMP%]     button{width:unset}}.summary-block[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;border-top:1px solid #8FB600;padding-top:30px}@media screen and (min-width: 1024px){.summary-block[_ngcontent-%COMP%]{flex-direction:unset;align-items:center}}.summary-block__info[_ngcontent-%COMP%]{max-width:500px}.summary-block__info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#8fb6001a;border-radius:10px;padding:15px 20px;font-weight:400;font-size:14px;line-height:140%;color:#8fb600}.summary-block__summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin-bottom:40px;margin-top:20px;font-weight:500;line-height:100%}@media screen and (min-width: 1024px){.summary-block__summary[_ngcontent-%COMP%]{margin-top:unset;margin-bottom:unset;margin-left:90px}}.summary-block__summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:18px;text-transform:uppercase;color:#3a3a3a}.summary-block__summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){margin-top:20px;font-size:24px;color:#8fb600}.summary-block__summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:not(:nth-child(2)){margin-top:20px;font-size:18px;text-transform:uppercase;text-decoration:line-through;color:#ea3b15}.summary-block__additional[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-weight:400;font-size:16px;line-height:120%}@media screen and (min-width: 1024px){.summary-block__additional[_ngcontent-%COMP%]{justify-content:flex-end;height:110px;margin-bottom:30px;margin-left:40px}}.summary-block__additional[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#ea3b15;margin-bottom:5px}']}),s=(0,it.gn)([function at(o){const r=o.prototype.ngOnDestroy;"function"!=typeof r&&console.warn(`${o.name} is using @TakeUntilDestroy but does not implement OnDestroy`),o.prototype.componentDestroy=function(){return this._takeUntilDestroy$=this._takeUntilDestroy$||new K.x,this._takeUntilDestroy$.asObservable()},o.prototype.ngOnDestroy=function(...e){"function"==typeof r&&r.apply(this,e),this._takeUntilDestroy$&&(this._takeUntilDestroy$.next(),this._takeUntilDestroy$.complete())}}],s);var l=f(8265),u=f(8372),c=f(4004),p=f(9646);const m={geometry:{type:"Polygon",coordinates:[[[37.377766161093476,55.91103583387744],[37.36665108693576,55.90686560046245],[37.36995556844211,55.9037557113318],[37.36107209218477,55.90134477225854],[37.363217859396705,55.90038035449214],[37.36720898641086,55.898668453654885],[37.36605027211637,55.89640187667467],[37.36654379857516,55.894846542136705],[37.37351754201387,55.894086937401596],[37.376607446799035,55.89288118492898],[37.37639287007786,55.8916512786433],[37.3734317113254,55.890758969187694],[37.37248757375217,55.88890193480042],[37.374504594931366,55.886514188028336],[37.3723159123752,55.883764478685805],[37.381328134665246,55.87891583042039],[37.38368847859836,55.87852984223635],[37.38038399709201,55.87698585096173],[37.37913945210905,55.86887888508],[37.368110208639806,55.86856518855636],[37.36068585408659,55.86728624562658],[37.35613682759733,55.86443863587736],[37.347124605307286,55.86323195833771],[37.34669545186492,55.8609391672982],[37.343562631735516,55.85859796676181],[37.34223225606413,55.8562807628132],[37.34223225606413,55.852466729142094],[37.3412022878024,55.84901446316973],[37.33167508138151,55.84541701925304],[37.34626629842253,55.843799267704966],[37.34703877461879,55.84264023994519],[37.339185266623176,55.839476883441655],[37.34463551534143,55.83628911772469],[37.34231808675258,55.833873968965015],[37.34836915029017,55.83235234790247],[37.34832623494589,55.828705044497895],[37.34502175343954,55.826289422722205],[37.34952786458456,55.8263377366341],[37.351244478354104,55.8242360257623],[37.34927037251914,55.8217959655091],[37.35390522969687,55.821336927097995],[37.3557505894991,55.822544911240385],[37.35901215566121,55.82024970916554],[37.35300400746783,55.81597302260724],[37.343262224325734,55.8119616898792],[37.330387621054214,55.806451471720024],[37.32330658925489,55.80374441097016],[37.321847467550796,55.79992520025042],[37.332018404135255,55.79895825178045],[37.33918526662305,55.798426419843466],[37.35021451009229,55.79538033275632],[37.35145905507521,55.79192297579322],[37.35017159474806,55.785418441082136],[37.35871174825148,55.77886444254213],[37.35965588582471,55.76676928844493],[37.36077168477486,55.75423473327939],[37.361801653036586,55.74498851145226],[37.36244538320017,55.737652901161745],[37.35072949422311,55.741187724537],[37.33618119252633,55.73779817421108],[37.32227662099314,55.734456756680146],[37.33030179036569,55.725666004064905],[37.33536580098581,55.72365571803489],[37.34824040425728,55.72040997664895],[37.344506769308516,55.71743043825307],[37.3303447057099,55.70541307272372],[37.32656815541692,55.70189923029632],[37.3402152348847,55.70095407370116],[37.34407761586613,55.69877285548665],[37.3431334782929,55.69678541690276],[37.34806874288029,55.69348895356002],[37.3587117482514,55.68638606551185],[37.36656525624701,55.67622644148922],[37.373045473226966,55.668489771626795],[37.37866738332214,55.661843254858105],[37.38570549977723,55.653497117749886],[37.38570549977723,55.64311047538663],[37.38501885426942,55.637770470451414],[37.39669182790224,55.632721066135225],[37.410253076681514,55.63262395580101],[37.39703515065613,55.62563137651283],[37.38330224049987,55.617957521324186],[37.37677910817568,55.61533446537839],[37.382443933615114,55.609213316090376],[37.39858010304872,55.60552073031642],[37.41385796559754,55.596093336046906],[37.43153908742372,55.58491358047743],[37.44544365895692,55.579468367560054],[37.46398308766785,55.56303089376413],[37.46707299245302,55.552814781892685],[37.47788765920105,55.54113595877234],[37.49350884450379,55.54103862060519],[37.50724175466004,55.54045458652008],[37.52131798757019,55.53373756830325],[37.53316262257996,55.52925891596957],[37.55050042165224,55.530135214336006],[37.5649199773163,55.53198511316852],[37.5813994695038,55.53042730943455],[37.59204247487489,55.53704754737373],[37.60182717336122,55.543472002179726],[37.62242653859559,55.54113595877234],[37.62929299367373,55.54035724665883],[37.64542916310731,55.53305606728571],[37.656072168478396,55.52964838432474],[37.66431191457216,55.52770100378982],[37.66791680348816,55.53432170258185],[37.67049172414246,55.5406492655105],[37.68113472951355,55.547462420522464],[37.69006112111512,55.5455159258066],[37.6912627507538,55.542498667694744],[37.70568230641786,55.54541859852983],[37.717698602804575,55.54921418300478],[37.72508004201355,55.552230923491095],[37.733834772238154,55.551160493807565],[37.7468810368866,55.54619720996803],[37.75374749196474,55.548532951356066],[37.75992730153504,55.547462420522464],[37.77503350270692,55.548824909228884],[37.77623513234559,55.55699884547105],[37.77861693395046,55.559163679400335],[37.75561430943874,55.57949267814694],[37.7348432828274,55.59096562776693],[37.74887660039328,55.598231707351005],[37.77707198155784,55.612832682914764],[37.7867708493557,55.618176101267224],[37.80455480999828,55.62838973088763],[37.82017599530102,55.637712232485114],[37.82987486309888,55.64329495587571],[37.835282196472896,55.6488768802507],[37.84232031292798,55.65632629089135],[37.8269995350349,55.666976232642114],[37.806743492554425,55.680678594925155],[37.794684280823475,55.689043154280924],[37.772883285950435,55.69217031062882],[37.74691950268626,55.69614555759623],[37.72915255017161,55.698763181474625],[37.71872412152173,55.70036275384932],[37.72069822735669,55.71218785502562],[37.726620544861575,55.716839368760546],[37.73129831738354,55.72047297683788],[37.74490248150706,55.719407153654466],[37.756832947205325,55.71836552550272],[37.76357065625073,55.71795371132905],[37.78399836010815,55.713156966252406],[37.796229233216046,55.710176872184974],[37.81742941326978,55.70506414655337],[37.829231132935256,55.70210766689125],[37.83704172558662,55.70033851836982],[37.839359154175476,55.71167906194466],[37.84103285260073,55.720351862013224],[37.84270655102603,55.72798135775394],[37.84476648754944,55.73790957033509],[37.84635435528625,55.745487206321954],[37.84738432354788,55.74974746440027],[37.84613977856499,55.76271900905494],[37.84510981030326,55.774259072663185],[37.84468065686087,55.78018502553307],[37.85631071514945,55.78291791518526],[37.86661039776665,55.78550551823013],[37.87588011212211,55.787609329944274],[37.88300405926567,55.78959212848789],[37.8916729588018,55.79171989711131],[37.89283167309622,55.80049570891587],[37.893389572571316,55.80392813073356],[37.906650413940966,55.80450822834468],[37.921112884949245,55.80525750823894],[37.93433081097466,55.80578924647943],[37.94239889569145,55.80610345201137],[37.947334160278835,55.80830281942613],[37.95188318676809,55.811807048134526],[37.953041901062534,55.81175871609394],[37.95441519207816,55.814030256549266],[37.95308481640677,55.81982933039547],[37.954157700012736,55.826642133226535],[37.95325647778372,55.82905773300607],[37.945703377197795,55.83207702088397],[37.94540296978811,55.83608627134589],[37.9396523136602,55.84231669215323],[37.87313353009082,55.84391035967443],[37.8501309055791,55.852215685931526],[37.81124960369922,55.86737313883409],[37.78498541302539,55.87683146870494],[37.77811895794727,55.88001589586242],[37.78532873577928,55.890291121649604],[37.79047857708788,55.89501777280736],[37.777518143127935,55.91025487355689],[37.767390121887686,55.918112167543846],[37.75271307415815,55.92659432153682],[37.752970566223595,55.93281017107275],[37.74018179364055,55.934448290258544],[37.736405243347626,55.934881898402246],[37.70439039654586,55.935508212679096],[37.691086639832,55.9370498660248],[37.67555128521773,55.938446936153106],[37.67443548626753,55.944709042533326],[37.64345060772749,55.93941040330637],[37.631348480652306,55.93757979512674],[37.62285124249313,55.94051836078938],[37.61134993023725,55.945142535338285],[37.5886906284794,55.94022933146432],[37.56997953839152,55.936327223677196],[37.577103485535076,55.94668380364216],[37.58019339032022,55.95092197386485],[37.58019339032022,55.95511152515219],[37.575043549011646,55.95843394899855],[37.57341276593058,55.9618042313016],[37.56834875531045,55.96724420802648],[37.55315672345008,55.96743675949483],[37.54465948529089,55.97152825086557],[37.53599058575477,55.96859204813767],[37.53538977093543,55.963874401446795],[37.53092657513464,55.96093761542213],[37.52569090313757,55.95891543593611],[37.51367460675086,55.95280010487509],[37.50775228924598,55.948658463627176],[37.49170195050085,55.94827317204942],[37.49290358013952,55.94336036703627],[37.49281774945105,55.934737362869825],[37.49324690289344,55.92885912681489],[37.49444853253209,55.922546253253124],[37.495821823547736,55.91758197097882],[37.49530683941688,55.91242422489578],[37.493332733581916,55.905867590483275],[37.491358627746955,55.90181734835192],[37.48586546368443,55.8988276114765],[37.480114807556525,55.903553218416],[37.46852766461218,55.90885678248156],[37.45668302960242,55.9169553657037],[37.450760712097534,55.930497413761096],[37.44681250042761,55.9422043219491],[37.43719946331822,55.940711045766015],[37.41900335736121,55.93589363175247],[37.40115057415804,55.92408842454938],[37.39222418255647,55.919365330317966],[37.39059339947542,55.9192207366835],[37.39050756878695,55.915461112073274],[37.38939176983675,55.91276166859503],[37.38449942059359,55.911460083765355],[37.377766161093476,55.91103583387744]]]},properties:{description:"2500",balloonContent:"2500 \u0440\u0443\u0431\u043b\u0435\u0439 + 50\u0440./\u043a\u043c \u0437\u0430 \u0437\u043e\u043d\u043e\u0439"},options:{fillColor:"#1e98ff",fillOpacity:.6,strokeColor:"#177bc9",strokeWidth:5,strokeOpacity:.9}};let b=(()=>{class o{constructor(e,n){this._element=e,this.staticData=n,this.isFinished=!1,this.calculationUpdate=new K.x,this.addressChanged=new K.x,n.getCartVariables().subscribe(i=>{this.vars=i,ymaps.ready(()=>{this.setMapConfig()})}),this.addressChanged.subscribe(i=>{this.requestToYandexGeocoder(i)})}calculateShippingCost(){return this.calculationUpdate.asObservable()}requestToYandexGeocoder(e){this.isFinished=!1,this.route&&(this.flowerValleyMap.geoObjects.remove(this.route),this.route=void 0),this.point&&(this.flowerValleyMap.geoObjects.remove(this.point),this.point=void 0),new ymaps.geocode(e,{boundedBy:this.searchBounds,strictBounds:!0}).then(i=>{if(i.geoObjects.getLength()){const d=i.geoObjects.get(0);if(this.polygon.geometry.contains(d.geometry.getCoordinates())){this.point=d,this.flowerValleyMap.geoObjects.add(d);const g=Number(this.polygon.properties.get("description"));this.calculationUpdate.next(g),this.isFinished=!0}else this.calculationUpdate.next(void 0)}else this.calculationUpdate.next(0)})}setMapConfig(){this.flowerValleyMap=new ymaps.Map("yaMap",{center:[37.622093,55.753994],zoom:9}),this.searchBounds=[[36.725552,56.334356],[38.604214,55.296747]],this.setPolygon()}yaMapRedraw(){this.flowerValleyMap.container.fitToViewport()}setPolygon(){if(this.vars){let n,e=` \u0440\u0443\u0431\u043b\u0435\u0439 + ${this.vars.deliveryPerKm}\u0440./\u043a\u043c \u0437\u0430 \u0437\u043e\u043d\u043e\u0439`;const i=m;n=this.vars.moscowDelivery.toString(),i.properties.description=n,i.properties.balloonContent=n+e,this.polygon=new ymaps.GeoObject(i,Object.assign({},i.options)),this.flowerValleyMap.geoObjects.add(this.polygon)}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.SBq),t.LFG(O.v))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var P=f(7613),_=f(3248),x=f(135),Z=f(9106),Q=f(5995),v=f(9272),k=f(9274),U=f(3878),B=f(4119),Y=f(5787),R=f(5730);function kt(o,r){1&o&&t.GkF(0)}function Et(o,r){if(1&o&&(t.ynx(0),t.YNc(1,kt,1,0,"ng-container",3),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",e.contentTemplate)}}function St(o,r){if(1&o&&(t.TgZ(0,"div",1),t.Hsn(1),t.YNc(2,Et,2,1,"ng-container",2),t.qZA()),2&o){const e=t.oxw();t.Q6J("hidden",!e.selected),t.uIk("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),t.xp6(2),t.Q6J("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const vt=["*"],Dt=["content"],Bt=["navbar"],Ut=["prevBtn"],Ft=["nextBtn"],Nt=["inkbar"];function qt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",12,13),t.NdJ("click",function(){return t.CHM(e),t.oxw().navBackward()}),t._UZ(2,"span",14),t.qZA()}}function Yt(o,r){if(1&o&&t._UZ(0,"span",24),2&o){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.leftIcon)}}function Jt(o,r){if(1&o&&t._UZ(0,"span",25),2&o){const e=t.oxw(3).$implicit;t.Q6J("ngClass",e.rightIcon)}}function jt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,Yt,1,1,"span",21),t.TgZ(2,"span",22),t._uU(3),t.qZA(),t.YNc(4,Jt,1,1,"span",23),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.leftIcon),t.xp6(2),t.Oqu(e.header),t.xp6(1),t.Q6J("ngIf",e.rightIcon)}}function Vt(o,r){1&o&&t.GkF(0)}function zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"span",26),t.NdJ("click",function(i){t.CHM(e);const d=t.oxw(2).$implicit;return t.oxw().close(i,d)}),t.qZA()}}const Gt=function(o,r){return{"p-highlight":o,"p-disabled":r}};function Qt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",16)(1,"a",17),t.NdJ("click",function(i){t.CHM(e);const d=t.oxw().$implicit;return t.oxw().open(i,d)})("keydown.enter",function(i){t.CHM(e);const d=t.oxw().$implicit;return t.oxw().open(i,d)}),t.YNc(2,jt,5,3,"ng-container",18),t.YNc(3,Vt,1,0,"ng-container",19),t.YNc(4,zt,1,0,"span",20),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Tol(e.headerStyleClass),t.Q6J("ngClass",t.WLB(16,Gt,e.selected,e.disabled))("ngStyle",e.headerStyle),t.xp6(1),t.Q6J("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),t.uIk("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),t.xp6(1),t.Q6J("ngIf",!e.headerTemplate),t.xp6(1),t.Q6J("ngTemplateOutlet",e.headerTemplate),t.xp6(1),t.Q6J("ngIf",e.closable)}}function Rt(o,r){1&o&&t.YNc(0,Qt,5,19,"li",15),2&o&&t.Q6J("ngIf",!r.$implicit.closed)}function Lt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",27,28),t.NdJ("click",function(){return t.CHM(e),t.oxw().navForward()}),t._UZ(2,"span",29),t.qZA()}}const Ht=function(o){return{"p-tabview p-component":!0,"p-tabview-scrollable":o}};let $t=0,Ct=(()=>{class o{constructor(e,n,i){this.viewContainer=n,this.cd=i,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+$t++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,this.tabView.updateInkBar(),this.tabView.cd.markForCheck()}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36((0,t.Gpc)(()=>xt)),t.Y36(t.s_b),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["p-tabPanel"]],contentQueries:function(e,n,i){if(1&e&&t.Suo(i,M.jx,4),2&e){let d;t.iGM(d=t.CRH())&&(n.templates=d)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:vt,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,St,3,5,"div",0)),2&e&&t.Q6J("ngIf",!n.closed)},directives:[h.O5,h.tP],encapsulation:2}),o})(),xt=(()=>{class o{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new t.vpe,this.onClose=new t.vpe,this.activeIndexChange=new t.vpe,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let i=this.findSelectedTab();i&&(i.selected=!1),this.tabChanged=!0,n.selected=!0;let d=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(d),this.onChange.emit({originalEvent:e,index:d}),this.updateScrollBar(d)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let i=this.tabs[n];if(!i.closed&&!e.disabled){i.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let i=0;i<this.tabs.length;i++)if(this.tabs[i]==e){n=i;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){let e=R.p.findSingle(this.navbar.nativeElement,"li.p-highlight");this.inkbar.nativeElement.style.width=R.p.getWidth(e)+"px",this.inkbar.nativeElement.style.left=R.p.getOffset(e).left-R.p.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:i}=e,d=R.p.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===i-d}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){var e,n;return[null===(e=this.prevBtn)||void 0===e?void 0:e.nativeElement,null===(n=this.nextBtn)||void 0===n?void 0:n.nativeElement].reduce((i,d)=>d?i+R.p.getWidth(d):i,0)}navBackward(){const e=this.content.nativeElement,n=R.p.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft-n;e.scrollLeft=i<=0?0:i}navForward(){const e=this.content.nativeElement,n=R.p.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft+n,d=e.scrollWidth-n;e.scrollLeft=i>=d?d:i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["p-tabView"]],contentQueries:function(e,n,i){if(1&e&&t.Suo(i,Ct,4),2&e){let d;t.iGM(d=t.CRH())&&(n.tabPanels=d)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Dt,5),t.Gf(Bt,5),t.Gf(Ut,5),t.Gf(Ft,5),t.Gf(Nt,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.content=i.first),t.iGM(i=t.CRH())&&(n.navbar=i.first),t.iGM(i=t.CRH())&&(n.prevBtn=i.first),t.iGM(i=t.CRH())&&(n.nextBtn=i.first),t.iGM(i=t.CRH())&&(n.inkbar=i.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:vt,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,qt,3,0,"button",2),t.TgZ(3,"div",3,4),t.NdJ("scroll",function(d){return n.onScroll(d)}),t.TgZ(5,"ul",5,6),t.YNc(7,Rt,1,1,"ng-template",7),t._UZ(8,"li",8,9),t.qZA()(),t.YNc(10,Lt,3,0,"button",10),t.qZA(),t.TgZ(11,"div",11),t.Hsn(12),t.qZA()()),2&e&&(t.Tol(n.styleClass),t.Q6J("ngClass",t.VKq(7,Ht,n.scrollable))("ngStyle",n.style),t.xp6(2),t.Q6J("ngIf",n.scrollable&&!n.backwardIsDisabled),t.xp6(5),t.Q6J("ngForOf",n.tabs),t.xp6(3),t.Q6J("ngIf",n.scrollable&&!n.forwardIsDisabled))},directives:[h.mk,h.PC,h.O5,Y.H,h.sg,B.u,h.tP],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),o})(),Wt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,M.m8,B.z,Y.T],M.m8]}),o})();var yt=f(1424),wt=f(1208),Tt=f(5652),Ot=f(3407),Kt=f(3058),Mt=f(6827);function Xt(o,r){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"\u0422\u043e\u0432\u0430\u0440"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"\u0426\u0435\u043d\u0430"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u041a\u043e\u043b-\u0432\u043e"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA()())}function te(o,r){if(1&o&&(t.TgZ(0,"tr",12)(1,"td",13),t._uU(2),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",(null==e.category?null:e.category.name)||"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430"," ")}}const ee=function(){return{"border-radius":"5px","object-fit":"cover"}};function ne(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",14)(1,"td",15),t._UZ(2,"p-image",16),t.TgZ(3,"span",17),t._uU(4),t.qZA()(),t.TgZ(5,"td",18),t._uU(6),t.ALo(7,"priceConverter"),t.qZA(),t.TgZ(8,"td",19)(9,"p-inputNumber",20,21),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.count=i})("ngModelChange",function(){const d=t.CHM(e).$implicit;return t.oxw().updateCount(d)})("onBlur",function(){const d=t.CHM(e).$implicit,g=t.MAs(10);return t.oxw().changeCount(d,g.value)}),t.qZA()(),t.TgZ(11,"td",18),t._uU(12),t.ALo(13,"priceConverter"),t.qZA()()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",e.photos[0].src)("alt",e.name)("imageStyle",t.DdM(19,ee)),t.xp6(1),t.Q6J("pTooltip",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(t.Dn7(7,11,e.price,"two","rub")),t.xp6(3),t.Q6J("ngModel",e.count)("min",n.getStep(e))("showButtons",!0)("step",n.getStep(e)),t.xp6(3),t.hij(" ",t.Dn7(13,15,e.price*e.count,"two","rub")," ")}}function oe(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"priceConverter"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(t.Dn7(2,1,e.shippingCost,"two","rub"))}}function ie(o,r){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u041d\u0435 \u0440\u0430\u0441\u0447\u0438\u0442\u0430\u043d\u043e"),t.qZA())}function ae(o,r){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0441\u0447\u0435\u0442"),t.qZA())}function re(o,r){1&o&&(t._UZ(0,"p-image",24),t.TgZ(1,"span"),t._uU(2,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0441\u043c\u0435\u0442\u0443"),t.qZA())}function se(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",22),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().getInvoice()}),t.YNc(1,re,3,0,"ng-template",23),t.qZA()}}let le=(()=>{class o{constructor(e,n,i,d,g){this.cartService=e,this.boxService=n,this.estimateGenerate=i,this.priceConvert=d,this.goods=[],this.boxes=[],this.pickUp=!1,this.orderSum=new t.vpe,this.boxService.getBoxes().pipe((0,j.R)(g)).subscribe(T=>{this.boxes=T})}updateCount(e){this.cartService.updateCount(e)}getStep(e){return e.coefficient?Number(e.coefficient):1}changeCount(e,n){const i=this.getStep(e);n<i?e.count=i:n/i!=0&&(e.count=Math.round(n/i)*i),this.cartService.updateCount(e)}get productsSum(){let e=0;return this.goods.map(n=>e+=n.price*n.count),e}get boxesSum(){let e=0;return this.boxes.map(n=>e+=n.count*n.price),e}getBoxes(){const e=[];return this.boxes.map(n=>e.push({name:n.name,price:n.price,count:n.count})),e}get boxesCount(){let e=0;return this.boxes.map(n=>e+=n.count),e}getOrderSum(){const e=this.productsSum+this.boxesSum;return this.orderSum.emit(e),e}getInvoice(){this.order&&this.estimateGenerate.getClientPDF(this.goods.map(e=>[e.name,e.price,e.count,e.price*e.count]),this.priceConvert.transform(this.order.deliveryPrice,"two","none"),this.getBoxes(),this.priceConvert.transform(this.productsSum,"two","rub"),this.priceConvert.transform(this.getOrderSum(),"two","rub"),this.order)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.N),t.Y36(X.r),t.Y36(Mt.h),t.Y36(V.K),t.Y36(l.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["flower-valley-confirmation-goods"]],inputs:{goods:"goods",order:"order",shippingCost:"shippingCost",pickUp:"pickUp"},outputs:{orderSum:"orderSum"},features:[t._Bn([l.z,Mt.h,V.K])],decls:26,vars:17,consts:[["styleClass","confirmation"],["rowGroupMode","subheader","groupRowsBy","category.id","styleClass","confirmation","scrollHeight","370px",3,"value","scrollable"],["pTemplate","header"],["pTemplate","groupheader"],["pTemplate","body"],["styleClass","ml-3 my-3","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440","icon","pi pi-plus","routerLink","/catalog"],[1,"summary-block"],[1,"summary-block__delivery"],[4,"ngIf"],[1,"summary-block__boxes"],[1,"summary-block__summary"],["styleClass","p-button-estimate w-12 flex justify-content-center blink",3,"onClick",4,"ngIf"],["pRowGroupHeader",""],["colspan","5"],[1,"product"],[1,"product__name"],["width","40px","height","40px",3,"src","alt","imageStyle"],["tooltipPosition","left",3,"pTooltip"],[1,"product__price"],[1,"product__count"],["buttonLayout","horizontal","inputId","horizontal","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"ngModel","min","showButtons","step","ngModelChange","onBlur"],["countNumber",""],["styleClass","p-button-estimate w-12 flex justify-content-center blink",3,"onClick"],["pTemplate","content"],["styleClass","flex align-items-center","src","assets/icons/estimate.svg"]],template:function(e,n){1&e&&(t.TgZ(0,"p-card",0)(1,"p-table",1),t.YNc(2,Xt,9,0,"ng-template",2),t.YNc(3,te,3,1,"ng-template",3),t.YNc(4,ne,14,20,"ng-template",4),t.qZA(),t._UZ(5,"p-button",5),t.TgZ(6,"div",6)(7,"div",7)(8,"span"),t._uU(9,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:"),t.qZA(),t.YNc(10,oe,3,5,"span",8),t.YNc(11,ie,2,0,"span",8),t.YNc(12,ae,2,0,"span",8),t.qZA(),t.TgZ(13,"div",9)(14,"span"),t._uU(15,"\u041a\u043e\u0440\u043e\u0431\u043a\u0438:"),t.qZA(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"priceConverter"),t.qZA()(),t.TgZ(19,"div",10)(20,"span"),t._uU(21,"\u0418\u0442\u043e\u0433:"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"priceConverter"),t.qZA()()()(),t.YNc(25,se,2,0,"p-button",11)),2&e&&(t.xp6(1),t.Q6J("value",n.goods)("scrollable",!0),t.xp6(9),t.Q6J("ngIf",n.shippingCost),t.xp6(1),t.Q6J("ngIf",0===n.shippingCost),t.xp6(1),t.Q6J("ngIf",void 0===n.shippingCost),t.xp6(5),t.AsE("",t.Dn7(18,9,n.boxesSum,"none","RUB")," (",n.boxesCount,"\u0448\u0442.)"),t.xp6(6),t.Oqu(t.Dn7(24,13,n.getOrderSum(),"two","rub")),t.xp6(2),t.Q6J("ngIf",n.pickUp&&(null==n.order?null:n.order.id)&&n.boxesSum))},directives:[tt.Z,q.iA,M.jx,q.Z5,L.E,B.u,ot.R,y.JJ,y.On,N.zx,D.rH,h.O5],pipes:[V.K],styles:[".p-card.confirmation{min-width:650px;display:none}@media screen and (min-width: 1024px){  .p-card.confirmation{display:block}}  .p-card.confirmation .p-card-content{padding:0}  .p-datatable.confirmation .p-datatable-wrapper::-webkit-scrollbar{width:3px}  .p-datatable.confirmation .p-datatable-wrapper::-webkit-scrollbar-thumb{background-color:#3a3a3a4d;border-radius:80px}  .p-datatable.confirmation .p-datatable-wrapper::-webkit-scrollbar-track{background-color:#3a3a3a1a;border-radius:80px}  .p-datatable.confirmation .p-datatable-thead tr th{background-color:#fff;font-weight:500;font-size:12px;line-height:100%;text-transform:uppercase;color:#787878;border:none}  .p-datatable.confirmation .p-datatable-tbody tr td{border:none}  .p-datatable.confirmation .p-datatable-tbody tr.p-rowgroup-header td{border-top:1px solid rgba(0,0,0,.1);font-weight:400;font-size:14px;line-height:100%;text-transform:uppercase;color:#787878;padding-bottom:0}  .p-datatable.confirmation .p-datatable-tbody .product__name{display:flex;align-items:center}  .p-datatable.confirmation .p-datatable-tbody .product__name_icon{display:flex;align-items:center;justify-content:center;border-radius:10px;padding:10px;background-color:#f5f5f5}  .p-datatable.confirmation .p-datatable-tbody .product__name>span{margin-left:15px;font-weight:500;font-size:16px;line-height:100%;color:#3a3a3a;max-width:85px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}  .p-datatable.confirmation .p-datatable-tbody .product__price{font-weight:500;font-size:16px;line-height:100%;color:#787878}  .p-datatable.confirmation .p-datatable-tbody .product__count{text-align:center}  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber{width:80px;height:35px}@media screen and (min-width: 1024px){  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber{width:auto;height:50px}}  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber input{max-width:45px;font-weight:500;font-size:17.7778px;line-height:110%;text-align:center;padding:0;outline:none!important;box-shadow:none!important;border:1px solid #E6E6E6;color:#3a3a3a}@media screen and (min-width: 1024px){  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber input{max-width:70px}}  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber input:focus-visible{outline:3px auto #E6E6E6}  .p-datatable.confirmation .p-datatable-tbody .product__count   .p-inputnumber .p-button.p-button-icon-only{width:unset;padding:0 5px;min-height:20px;min-width:20px;background-color:#fff;border-color:#e6e6e6;color:#787878}  .p-datatable.confirmation .p-datatable-tbody .product__price{font-weight:500;font-size:16px;line-height:100%;color:#3a3a3a}.summary-block[_ngcontent-%COMP%]{border-top:1px solid #8FB600;padding-top:25px;display:flex;align-items:flex-start;justify-content:space-between}.summary-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:500;font-size:14px;line-height:100%;text-transform:uppercase;color:#3a3a3a}.summary-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{margin-top:10px;font-weight:500;font-size:18px;line-height:100%;color:#8fb600}[_nghost-%COMP%]     .p-button.blink{margin-top:20px;padding:25px;border:3px solid #8FB600;animation:borderBlink 2s infinite;-webkit-animation:borderBlink 2s infinite}[_nghost-%COMP%]     .p-button.blink:hover{border-color:transparent;animation:none;-webkit-animation:none}@keyframes borderBlink{0%,to{border-color:transparent}50%{border-color:#8fb600}}"]}),o})();var Zt=f(97),At=f(5315);const ue=["mapContent"],ce=["yamap"];let pe=(()=>{class o{constructor(e,n){this.yaMap=e,this.cdr=n,this.isMapAlreadyGenerated=!1,this.showMap=!1}get innerWidth(){return window.innerWidth}showMapToggle(){if(this.showMap=!0,!this.isMapAlreadyGenerated){const e=this.map;e&&(e.nativeElement.style.width=this.innerWidth>600?"600px":"100%",e.nativeElement.style.height="600px",e.nativeElement.style.position="static",this.mapContent&&(this.mapContent.nativeElement.append(e.nativeElement),this.mapRedraw(),this.isMapAlreadyGenerated=!0))}this.cdr.detectChanges()}mapRedraw(){this.yaMap.yaMapRedraw(),this.cdr.detectChanges()}visibleChange(){this.cdr.detectChanges()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["flower-valley-yandex-map"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ue,5),t.Gf(ce,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.mapContent=i.first),t.iGM(i=t.CRH())&&(n.map=i.first)}},inputs:{isMapAlreadyGenerated:"isMapAlreadyGenerated"},decls:5,vars:4,consts:[["id","yaMap",2,"position","absolute","top","-500px"],["yamap",""],[3,"visible","styleClass","modal","closeOnEscape","visibleChange","onShow"],["mapContent",""]],template:function(e,n){1&e&&(t._UZ(0,"div",0,1),t.TgZ(2,"p-dialog",2),t.NdJ("visibleChange",function(d){return n.showMap=d})("visibleChange",function(){return n.visibleChange()})("onShow",function(){return n.mapRedraw()}),t._UZ(3,"div",null,3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("visible",n.showMap)("styleClass",n.innerWidth>600?"":"w-12")("modal",!0)("closeOnEscape",!1))},directives:[At.V],encapsulation:2}),o})();function de(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",45),t.NdJ("onClick",function(){return t.CHM(e),t.oxw(2).deliveryButtonClick()}),t.qZA()}}const fe=function(o,r){return{success:o,error:r}};function me(o,r){if(1&o&&(t.TgZ(0,"div",46),t._uU(1),t.ALo(2,"priceConverter"),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngClass",t.WLB(6,fe,e.shippingCost,e.delivery_error)),t.xp6(1),t.hij(" ",e.shippingCost?"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 "+t.Dn7(2,2,e.shippingCost,"none","RUB"):e.delivery_error," ")}}function _e(o,r){if(1&o&&(t.TgZ(0,"div",42),t.YNc(1,de,1,0,"p-button",43),t.YNc(2,me,3,9,"div",44),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.showDelivery&&!e.delivery_error),t.xp6(1),t.Q6J("ngIf",e.showDelivery||e.delivery_error)}}function ge(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",47),t.NdJ("onClick",function(){return t.CHM(e),t.oxw(),t.MAs(56).showMapToggle()}),t.qZA()}}function he(o,r){if(1&o&&(t.TgZ(0,"div",48)(1,"span"),t._uU(2,"\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415!"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u0414\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0438\u043b\u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.TgZ(9,"span"),t._uU(10,"\u0412 \u0434\u0440\u0443\u0433\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e"),t.qZA()()),2&o){const e=t.oxw();t.xp6(6),t.hij("\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u043f\u043e \u041c\u043e\u0441\u043a\u0432\u0435 - ",e.cartVariables.moscowDelivery,"\u20bd"),t.xp6(2),t.hij("\u0414\u0430\u043b\u0435\u0435 - ",e.cartVariables.deliveryPerKm,"\u20bd/\u043a\u043c")}}function be(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"p-button",50),t.NdJ("onClick",function(){return t.CHM(e),t.oxw(),t.MAs(36).hideOverlay()}),t.qZA()()}}function ve(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"flower-valley-entity-form",51),t.NdJ("dataChanges",function(i){return t.CHM(e),t.oxw().entityDataChanges(i)}),t.qZA()}}function Ce(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",52)(1,"p-checkbox",53),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().clientDataVerified=i}),t.qZA(),t.TgZ(2,"label",54),t._uU(3,"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.clientDataVerified)("binary",!0)}}function xe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",55),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().confirmOrder()}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("loading",e.isInvoiceLoading)("disabled",e.isConfirmOrderDisabled||"entity"===e.clientType&&!e.clientDataVerified)}}function ye(o,r){1&o&&t._UZ(0,"p-button",56)}const Pt=function(o){return{"p-button-outlined":o}},we=function(o){return{"calculation-padding":o}},Te=function(){return["/private-policy"]};let Oe=(()=>{class o{constructor(e,n,i,d,g,T,C,I,w,E,H,et,Xe,tn){this.fb=e,this.$destroy=n,this.yaMap=i,this.cdr=d,this.bpService=g,this.cartService=T,this.productService=C,this.orderService=I,this.boxService=w,this.mailService=E,this.documentService=H,this.messageService=et,this.router=Xe,this.route=tn,this.goods=[],this.clientType="individual",this.currentDate=new Date,this.shippingCost=0,this.delivery_error="",this.showDelivery=!1,this.clientDataVerified=!1,this.isInvoiceLoading=!1,this.isEntityDataChanged=!1,this.isOrderConfirmed=!1,this.message=[],this.pickUp=e.control(!1),this.deliveryDate=e.control(null),this.comment=e.control(""),this.contacts=e.group({name:["",[y.kI.required]],phone:["",[y.kI.required]],email:["",[y.kI.required,y.kI.email]],address:[""],deliveryWishDateFrom:[""],deliveryWishDateTo:[""],comment:[""],orderSum:[null,y.kI.required]}),this.contacts.controls.address.valueChanges.pipe((0,j.R)(n),(0,u.b)(1e3)).subscribe(S=>{this.shippingCost=0,this.showDelivery=!1,this.delivery_error="",S?i.addressChanged.next(S):d.detectChanges()}),i.calculateShippingCost().pipe((0,j.R)(this.$destroy)).subscribe(S=>{this.shippingCost=S,0===this.shippingCost&&(this.delivery_error="\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),this.cdr.detectChanges()}),this.cartService.isTulipsInclude&&(this.pickUp.setValue(!0),this.pickUp.disable(),this.contacts.controls.address.disable()),this.pickUp.valueChanges.subscribe(S=>{S?(this.shippingCost=0,this.showDelivery=!1,this.contacts.controls.address.setValue(""),this.contacts.controls.address.disable()):this.contacts.controls.address.enable()}),this.deliveryDate.valueChanges.subscribe(S=>{this.contacts.controls.deliveryWishDateFrom.setValue(S?S[0]:null),this.contacts.controls.deliveryWishDateTo.setValue(S?S[0]:null)}),this.comment.valueChanges.subscribe(S=>{this.contacts.controls.comment.setValue(S)}),this.cartService.cartUpdate().subscribe(S=>{this.goods=S})}ngOnDestroy(){this.isOrderConfirmed&&(this.cartService.clearCart(),this.message=[])}deliveryButtonClick(){this.showDelivery=!0,this.cdr.detectChanges()}get isConfirmOrderDisabled(){return!(!this.contacts.invalid&&(this.contacts.getRawValue().address&&!this.pickUp.value?this.showDelivery||!this.showDelivery&&void 0===this.shippingCost:!this.contacts.getRawValue().address&&this.pickUp.value))}confirmOrder(){var e,n;if((0,P.F)(this.contacts)||this.isConfirmOrderDisabled)return;const i=this.getOrderData();if("entity"===this.clientType){if((0,P.F)(this.entityData))return;this.isInvoiceLoading=!0,this.messageService.add(x.ZX),this.entityData.disable(),i.deliveryPrice===(null===(e=this.cartVariables)||void 0===e?void 0:e.moscowDelivery)||this.pickUp.value?this.createBusinessInvoice(i):(i.status=Z.i.Calculate_Delivery,this.getPartner().subscribe(({partnerId:d,inn:g})=>{i.clientId=d,i.clientInn=g,this.createOrder(i)}))}else this.isInvoiceLoading=!0,this.messageService.add(x.ZX),i.deliveryPrice===(null===(n=this.cartVariables)||void 0===n?void 0:n.moscowDelivery)||this.pickUp.value?this.createIndividualInvoice(i):(i.status=Z.i.Calculate_Delivery,this.createOrder(i))}createOrder(e){this.orderService.addItem(e).subscribe(n=>{this.orderId=n,this.sendBusinessNotification(n)},({error:n})=>{this.isInvoiceLoading=!1,this.messageService.add({severity:"error",summary:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",detail:n.message})},()=>{this.isInvoiceLoading=!1})}createIndividualInvoice(e){this.createIndividualEntity(e).subscribe(n=>{this.createInvoice(e,n,!1)})}createBusinessInvoice(e){this.getPartner().subscribe(({partnerId:n,inn:i})=>{e.clientId=n,e.clientInn=i,this.createInvoice(e,n,!0)})}createInvoice(e,n,i){e.clientId=n;const d=this.bpService.selfId,g=[];this.orderService.generateInvoiceGoods(this.goods).map(C=>{g.push({volume_id:C.volume||"",model_name:C.name,qname:C.name,nds:0,nds_mode:0,count:C.count,price:C.price})}),this.orderService.generateInvoiceBoxes(e.boxes||[]).map(C=>{g.push({model_id:this.bpService.boxId,volume_id:this.bpService.boxVolume,nds:0,nds_mode:0,count:C.count,price:C.price,qname:C.name})}),e.deliveryPrice&&g.push({model_id:this.bpService.deliveryId,volume_id:this.bpService.deliveryVolume,nds:0,nds_mode:0,count:1,price:e.deliveryPrice,qname:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),this.bpService.createInvoice({firm_id:d,partner_id:n,goods:g,partner_flag:"A"}).subscribe(C=>{const I=C.Object;e.invoiceId=I,this.bpService.sendInvoiceToTelepak(I,{report_name:"\u0421\u0447\u0435\u0442 \u0441 \u043e\u0431\u0440\u0430\u0437\u0446\u043e\u043c \u043f. \u043f. + \u043f\u0435\u0447\u0430\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c",send_with_stamp:!0}).subscribe(({id:w})=>{w&&(e.accountNumber=w,!e.deliveryPrice&&!this.pickUp.value&&(e.status=Z.i.Calculate_Delivery),this.orderService.addItem(e).subscribe(E=>{this.sendInvoiceMail(I,n,E,i)}))})})}getPartner(){return this.entityId?this.isEntityDataChanged?this.bpService.updateFirm(Object.assign(Object.assign({},this.entityData.getRawValue()),{Object:this.entityId})).pipe((0,c.U)(e=>({partnerId:e.Object,inn:this.entityData.getRawValue().INN}))):(0,p.of)({partnerId:this.entityId,inn:this.entityData.getRawValue().INN}):this.bpService.createFirm(this.entityData.getRawValue()).pipe((0,c.U)(e=>({partnerId:e.Object,inn:this.entityData.getRawValue().INN})))}createIndividualEntity(e){const n=this.contacts.getRawValue();return this.bpService.createFirm({FullName:n.name,Address:`${n.address?n.address+",":""} ${n.phone}, ${n.email}`}).pipe((0,c.U)(i=>(e.clientId=i.Object,i.Object)))}entityDataChanges(e){o.instanceOfId(e)?(this.entityId=e.id,this.isEntityDataChanged=e.isChanged):(this.entityData=e,this.isEntityDataChanged||(this.entityId=void 0))}static instanceOfId(e){return"id"in e}setClientType(e){0===e&&(this.clientType="individual"),1===e&&(this.clientType="entity")}getOrderData(){const e=this.contacts.getRawValue(),n=[];this.goods.map(g=>{n.push({id:g.id,price:g.price,count:g.count})});let i=[];this.boxService.getBoxes().subscribe(g=>{g.map(T=>{i.push({id:T.id,price:T.price,count:T.count})})});const d={clientEmail:e.email,clientName:e.name,clientPhone:e.phone,clientAddress:e.address?e.address:"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437",comment:e.comment,deliveryWishDateFrom:e.deliveryWishDateFrom?e.deliveryWishDateFrom.toISOString():null,deliveryWishDateTo:e.deliveryWishDateTo?e.deliveryWishDateTo.toISOString():null,orderSum:e.orderSum,products:n,boxes:i,deliveryPrice:0};return this.shippingCost&&(d.deliveryPrice=this.shippingCost),d}setOrderSum(e){this.contacts.controls.orderSum.setValue(e)}sendInvoiceMail(e,n,i,d){const g=[this.bpService.getInvoiceById(e),this.bpService.getFirmById(n),this.orderService.getItemById(i)];(0,W.D)(g).subscribe(([T,C,I])=>{T=T,C=C;const w=I,E=new FormData;if(E.append("billNumber",T.Name),E.append("billDate",T.Date),E.append("accountNumber",w.accountNumber),E.append("email",w.clientEmail),E.append("orderId",i.toString()),d){const H=this.documentService.getOffer(w,C).subscribe(et=>{H.unsubscribe(),E.append("file",et),this.mailService.sendBusinessMail(E,w,C.FullName).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:`\u0417\u0430\u044f\u0432\u043a\u0430 \u2116${i} \u043f\u0440\u0438\u043d\u044f\u0442\u0430`,detail:`\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0441 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u043c\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\u043c\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u043f\u043e\u0447\u0442\u0443 ${w.clientEmail}`,life:1e4}),this.isInvoiceLoading=!1,this.isOrderConfirmed=!0,this.router.navigate(["download-invoice"],{relativeTo:this.route,queryParams:{invoice:w.accountNumber,order:i}})})})}else this.mailService.sendIndividualMail(E,w).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d",detail:`\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u2116${i} \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u043f\u043e\u0447\u0442\u0443 ${w.clientEmail}`,life:1e4,key:"orderMessage"}),this.isInvoiceLoading=!1,this.isOrderConfirmed=!0})})}sendBusinessNotification(e){this.orderService.getItemById(e).subscribe(n=>{this.mailService.sendBusinessNotificationMail(n).subscribe(()=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:`\u0417\u0430\u044f\u0432\u043a\u0430 \u2116${e} \u043f\u0440\u0438\u043d\u044f\u0442\u0430`,detail:"\u0412\u0430\u043c \u043d\u0430 \u043f\u043e\u0447\u0442\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0441 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u043c\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\u043c\u0438",life:1e4,key:"orderMessage"}),this.isInvoiceLoading=!1,this.isOrderConfirmed=!0})})}get shippingCostInput(){return this.showDelivery||void 0===this.shippingCost?this.shippingCost:0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.qu),t.Y36(l.z),t.Y36(b),t.Y36(t.sBO),t.Y36(Q.k),t.Y36(A.N),t.Y36(v.M),t.Y36(k.p),t.Y36(X.r),t.Y36(U.Y),t.Y36(_.M),t.Y36(M.ez),t.Y36(D.F0),t.Y36(D.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["flower-valley-order-confirmation"]],inputs:{cartVariables:"cartVariables"},features:[t._Bn([l.z,b,_.M])],decls:57,vars:32,consts:[[1,"confirmation"],[1,"p-buttonset"],["pButton","","label","\u0424\u0418\u0417\u0418\u0427\u0415\u0421\u041a\u0418\u0415 \u041b\u0418\u0426\u0410",1,"w-6",3,"ngClass","click"],["pButton","","label","\u042e\u0420\u0418\u0414\u0418\u0427\u0415\u0421\u041a\u0418\u0415 \u041b\u0418\u0426\u0410",1,"w-6",3,"ngClass","click"],["styleClass","tab-view",3,"onChange"],["header","\u0424\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043b\u0438\u0446\u0430"],["header","\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043b\u0438\u0446\u0430"],[1,"confirmation__content"],[1,"confirmation__content_form"],[3,"formGroup"],[1,"p-float-label"],["type","text","id","FIO","pInputText","","formControlName","name"],["for","FIO"],["type","text","id","phone","pInputText","","formControlName","phone"],["for","phone"],["type","text","id","email","pInputText","","formControlName","email"],["for","email"],["type","text","id","address","pInputText","","formControlName","address",3,"ngClass"],["for","address"],["class","calculation-result",4,"ngIf"],[1,"flex","justify-content-end"],["styleClass","p-button-text","label","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",3,"onClick",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"p-field-checkbox"],["inputId","pickUp",3,"formControl","binary"],["for","pickUp"],["dateFormat","dd.mm.yy","selectionMode","range","inputId","range","styleClass","w-12",3,"formControl","firstDayOfWeek","minDate","showButtonBar","readonlyInput"],["calendar",""],["pTemplate","footer"],["for","range"],["id","textarea","rows","3","pInputTextarea","",2,"resize","none",3,"formControl"],["for","textarea"],[3,"dataChanges",4,"ngIf"],["class","p-field-checkbox mt-2",4,"ngIf"],[1,"private-policy"],[3,"routerLink"],["styleClass","confirm-order","label","\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",3,"loading","disabled","onClick",4,"ngIf"],["styleClass","confirm-order","label","\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437","routerLink","/catalog",4,"ngIf"],[1,"confirmation__content_goods"],[3,"pickUp","goods","order","shippingCost","orderSum"],["key","orderMessage","styleClass","order-message",3,"value","valueChange"],["yandexMapComponent",""],[1,"calculation-result"],["styleClass","blink","label","\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443",3,"onClick",4,"ngIf"],["class","delivery",3,"ngClass",4,"ngIf"],["styleClass","blink","label","\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443",3,"onClick"],[1,"delivery",3,"ngClass"],["styleClass","p-button-text","label","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",3,"onClick"],[1,"delivery-info"],[1,"flex","justify-content-center","align-items-center"],["styleClass","w-full","label","\u0417\u0430\u043a\u0440\u044b\u0442\u044c",1,"w-full",3,"onClick"],[3,"dataChanges"],[1,"p-field-checkbox","mt-2"],["inputId","clientDataVerify",3,"ngModel","binary","ngModelChange"],["for","clientDataVerify"],["styleClass","confirm-order","label","\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",3,"loading","disabled","onClick"],["styleClass","confirm-order","label","\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437","routerLink","/catalog"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"span",1)(2,"button",2),t.NdJ("click",function(){return n.clientType="individual"}),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return n.clientType="entity"}),t.qZA()(),t.TgZ(4,"p-tabView",4),t.NdJ("onChange",function(d){return n.setClientType(d.index)}),t._UZ(5,"p-tabPanel",5)(6,"p-tabPanel",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"form",9)(10,"span",10),t._UZ(11,"input",11),t.TgZ(12,"label",12),t._uU(13,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e"),t.qZA()(),t.TgZ(14,"span",10),t._UZ(15,"input",13),t.TgZ(16,"label",14),t._uU(17,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),t.qZA()(),t.TgZ(18,"span",10),t._UZ(19,"input",15),t.TgZ(20,"label",16),t._uU(21,"Email"),t.qZA()(),t.TgZ(22,"span",10),t._UZ(23,"input",17),t.TgZ(24,"label",18),t._uU(25,"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),t.qZA(),t.YNc(26,_e,3,2,"div",19),t.qZA(),t.TgZ(27,"div",20),t.YNc(28,ge,1,0,"p-button",21),t.qZA(),t.YNc(29,he,11,2,"div",22),t.qZA(),t.TgZ(30,"div",23),t._UZ(31,"p-checkbox",24),t.TgZ(32,"label",25),t._uU(33,"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437"),t.qZA()(),t.TgZ(34,"span",10)(35,"p-calendar",26,27),t.YNc(37,be,2,0,"ng-template",28),t.qZA(),t.TgZ(38,"label",29),t._uU(39,"\u0416\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 (\u0441\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437\u0430)"),t.qZA()(),t.TgZ(40,"span",10),t._UZ(41,"textarea",30),t.TgZ(42,"label",31),t._uU(43,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),t.qZA()(),t.YNc(44,ve,1,0,"flower-valley-entity-form",32),t.YNc(45,Ce,4,2,"div",33),t.TgZ(46,"div",34),t._uU(47,' \u041d\u0430\u0436\u0438\u043c\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0443 "\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437" \u0412\u044b \u0441\u043e\u0433\u043b\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044c \u0441 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 '),t.TgZ(48,"a",35),t._uU(49,"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"),t.qZA()(),t.YNc(50,xe,1,2,"p-button",36),t.YNc(51,ye,1,0,"p-button",37),t.qZA(),t.TgZ(52,"div",38)(53,"flower-valley-confirmation-goods",39),t.NdJ("orderSum",function(d){return n.setOrderSum(d)}),t.qZA()()(),t.TgZ(54,"p-messages",40),t.NdJ("valueChange",function(d){return n.message=d}),t.qZA()(),t._UZ(55,"flower-valley-yandex-map",null,41)),2&e&&(t.xp6(2),t.Q6J("ngClass",t.VKq(25,Pt,"individual"!==n.clientType)),t.xp6(1),t.Q6J("ngClass",t.VKq(27,Pt,"entity"!==n.clientType)),t.xp6(6),t.Q6J("formGroup",n.contacts),t.xp6(14),t.Q6J("ngClass",t.VKq(29,we,n.shippingCost)),t.xp6(3),t.Q6J("ngIf",n.shippingCost||n.delivery_error),t.xp6(2),t.Q6J("ngIf",n.showDelivery),t.xp6(1),t.Q6J("ngIf",n.cartVariables&&!n.pickUp.value),t.xp6(2),t.Q6J("formControl",n.pickUp)("binary",!0),t.xp6(4),t.Q6J("formControl",n.deliveryDate)("firstDayOfWeek",1)("minDate",n.currentDate)("showButtonBar",!0)("readonlyInput",!0),t.xp6(6),t.Q6J("formControl",n.comment),t.xp6(3),t.Q6J("ngIf","entity"===n.clientType),t.xp6(1),t.Q6J("ngIf","entity"===n.clientType),t.xp6(3),t.Q6J("routerLink",t.DdM(31,Te)),t.xp6(2),t.Q6J("ngIf",!n.isOrderConfirmed),t.xp6(1),t.Q6J("ngIf",n.isOrderConfirmed),t.xp6(2),t.Q6J("pickUp",n.pickUp.value)("goods",n.goods)("order",n.order)("shippingCost",n.shippingCostInput),t.xp6(1),t.Q6J("value",n.message))},directives:[N.Hq,h.mk,xt,Ct,y._Y,y.JL,y.sg,y.Fj,yt.o,y.JJ,y.u,h.O5,N.zx,wt.XZ,y.oH,Tt.f,M.jx,Ot.g,Kt.c,y.On,D.yS,D.rH,le,Zt.V,pe],pipes:[V.K],styles:[".confirmation[_ngcontent-%COMP%]{display:flex;flex-direction:column}.confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 1024px){.confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]{display:unset}}.confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:100%;padding-top:20px;padding-bottom:20px}.confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]   .p-button.p-button-outlined[_ngcontent-%COMP%]{color:#787878;background:none}.confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]   .p-button.p-button-outlined[_ngcontent-%COMP%]:enabled:hover, .confirmation[_ngcontent-%COMP%]   .p-buttonset[_ngcontent-%COMP%]   .p-button.p-button-outlined[_ngcontent-%COMP%]:enabled:active{background-color:#6d8a00;border-color:#6d8a00;color:#fff}.confirmation[_ngcontent-%COMP%]     p-tabview{width:100%;display:unset}@media screen and (min-width: 1024px){.confirmation[_ngcontent-%COMP%]     p-tabview{display:none}}.confirmation[_ngcontent-%COMP%]     p-tabview a{box-shadow:none!important;outline:none!important;text-decoration:none;font-style:normal;font-weight:500;font-size:14px;line-height:17px;padding:15px!important}.confirmation[_ngcontent-%COMP%]     p-tabview .p-highlight .p-tabview-nav-link{color:#8fb600;border-color:#8fb600}.confirmation[_ngcontent-%COMP%]     p-tabview .p-tabview-nav-link, .confirmation[_ngcontent-%COMP%]     p-tabview .p-tabview-nav{background:none!important}.confirmation[_ngcontent-%COMP%]     p-tabview .p-tabview-ink-bar{background-color:#8fb600}.confirmation[_ngcontent-%COMP%]     p-tabview .p-tabview-panels{display:none}.confirmation__content[_ngcontent-%COMP%]{margin-top:50px;display:flex;justify-content:space-between;flex-direction:column}@media screen and (min-width: 1024px){.confirmation__content[_ngcontent-%COMP%]{flex-direction:unset}}.confirmation__content_form[_ngcontent-%COMP%]{width:100%}@media screen and (min-width: 1024px){.confirmation__content_form[_ngcontent-%COMP%]{width:540px}}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label{position:relative;width:100%;margin-bottom:10px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputtext{width:100%;padding:20px 22px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputtext.calculation-padding{padding-right:210px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label input:focus, .confirmation__content_form[_ngcontent-%COMP%]     .p-float-label input.p-filled{padding-bottom:15px;padding-top:25px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label input:focus~label, .confirmation__content_form[_ngcontent-%COMP%]     .p-float-label input.p-filled~label{top:15px;left:22px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputwrapper-focus~label, .confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputwrapper-filled~label{top:15px;left:22px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputwrapper-focus input, .confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .p-inputwrapper-filled input{padding-bottom:15px;padding-top:25px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result{position:absolute;top:15px;right:10px;font-weight:400;font-size:14px;line-height:100%}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result   .p-button{padding:8px 22px;font-weight:400;font-size:14px;line-height:100%}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result   .p-button.blink{animation:buttonBlink 2s infinite}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result   .p-button.blink:hover{animation:none;-webkit-animation:none;background-color:#6d8a00;border-color:#6d8a00}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result .delivery{border-radius:5px;padding:8px 22px}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result .delivery.success{border:1px solid #8FB600;color:#3a3a3a}.confirmation__content_form[_ngcontent-%COMP%]     .p-float-label .calculation-result .delivery.error{border:1px solid #EA3B15;background-color:#ea3b15;color:#fff}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox{margin-bottom:10px}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox   .p-checkbox-box{box-shadow:none}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox   .p-checkbox .p-checkbox-box.p-highlight{background-color:#8fb600;border-color:#8fb600}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox   .p-checkbox:not(.p-checkbox-disabled) .p-checkbox-box:hover, .confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox   .p-checkbox:not(.p-checkbox-disabled) .p-checkbox-box.p-focus{border-color:#8fb600}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox label{margin-left:10px;font-weight:500;font-size:16px;line-height:100%}.confirmation__content_form[_ngcontent-%COMP%]     .p-field-checkbox label:hover{cursor:pointer}.confirmation__content_form[_ngcontent-%COMP%]   .private-policy[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px}@media screen and (min-width: 1024px){.confirmation__content_form[_ngcontent-%COMP%]   .private-policy[_ngcontent-%COMP%]{width:90%}}.confirmation__content_form[_ngcontent-%COMP%]   .private-policy[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#8fb600}.confirmation__content_form[_ngcontent-%COMP%]     .p-button.confirm-order{width:100%;padding:25px;border-radius:15px}@media screen and (min-width: 1024px){.confirmation__content_form[_ngcontent-%COMP%]     .p-button.confirm-order{width:90%}}.confirmation__content_form[_ngcontent-%COMP%]     .p-button.confirm-order span{font-weight:500;font-size:18px;line-height:100%}.confirmation__content_form[_ngcontent-%COMP%]     .p-button.p-button-text{padding:8px 22px;font-weight:400;font-size:14px;line-height:100%}@media screen and (min-width: 1024px){.confirmation__content_goods[_ngcontent-%COMP%]{margin-left:30px}}@media screen and (min-width: 1230px){.confirmation__content_goods[_ngcontent-%COMP%]{margin-left:unset}}.top-10[_ngcontent-%COMP%]{margin-top:10px}@keyframes buttonBlink{0%,to{background-color:#8fb600;border-color:#8fb600}50%{background-color:#6d8a00;border-color:#6d8a00}}.delivery-info[_ngcontent-%COMP%]{font-size:15px;margin-bottom:5px;display:flex;flex-direction:column}.delivery-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:5px}.delivery-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:#ea3b15}"]}),o})();function Me(o,r){if(1&o&&(t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"p-image",12),t.qZA(),t.TgZ(3,"div",13)(4,"div",14),t._uU(5),t.ALo(6,"priceConverter"),t.qZA(),t.TgZ(7,"div",15),t._uU(8),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.AsE(" ",e.cartContent.minSumTitle," ",t.Dn7(6,3,e.cartVariables.minOrderSum,"none","full")," "),t.xp6(3),t.Oqu(e.cartContent.minSumInfo)}}function Ze(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.cartContent.address," ")}}function Ae(o,r){if(1&o&&(t.TgZ(0,"a",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.MGl("href","tel:",e,"",t.LSH),t.xp6(1),t.hij("",e,"\xa0")}}function Pe(o,r){if(1&o&&(t.TgZ(0,"a",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.MGl("href","mailto:",e,"",t.LSH),t.xp6(1),t.Oqu(e)}}function Ie(o,r){if(1&o&&(t.TgZ(0,"div",16)(1,"div",17),t.YNc(2,Ze,2,1,"span",18),t.qZA(),t.TgZ(3,"div",19)(4,"div")(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"div"),t.YNc(8,Ae,2,2,"a",20),t.qZA()(),t.TgZ(9,"div")(10,"span"),t._uU(11),t.qZA(),t.TgZ(12,"div"),t.YNc(13,Pe,2,2,"a",20),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.cartContent.address),t.xp6(4),t.hij("",e.cartContent.callText,"\xa0"),t.xp6(2),t.Q6J("ngForOf",e.cartContent.phones),t.xp6(3),t.hij("",e.cartContent.writeText,"\xa0"),t.xp6(2),t.Q6J("ngForOf",e.cartContent.mail)}}function ke(o,r){1&o&&(t.TgZ(0,"div"),t._uU(1,"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"),t.qZA())}function Ee(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p-button",22),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().clearCart()}),t.qZA()()}}function Se(o,r){if(1&o&&t._UZ(0,"flower-valley-cart-goods",23),2&o){const e=t.oxw();t.Q6J("cartVariables",e.cartVariables)("cartContent",e.cartContent)}}function De(o,r){if(1&o&&(t.TgZ(0,"div",24)(1,"div",25),t._uU(2),t.qZA(),t.TgZ(3,"div",26)(4,"div",27)(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"div",28)(10,"span"),t._uU(11),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"div",29)(15,"span"),t._uU(16),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.cartContent.bannerTitle),t.xp6(4),t.Oqu(e.cartContent.leftBannerBlock.title),t.xp6(2),t.Oqu(e.cartContent.leftBannerBlock.description),t.xp6(3),t.Oqu(e.cartContent.centerBannerBlock.title),t.xp6(2),t.hij("",e.cartContent.centerBannerBlock.description," "),t.xp6(3),t.Oqu(e.cartContent.rightBannerBlock.title),t.xp6(2),t.Oqu(e.cartContent.rightBannerBlock.description)}}function Be(o,r){if(1&o&&(t.TgZ(0,"flower-valley-container",30),t._UZ(1,"flower-valley-order-confirmation",31),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("cartVariables",e.cartVariables)}}function Ue(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",32),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().navigateToBoxes()}),t.qZA()}}let Fe=(()=>{class o{constructor(e,n,i,d,g,T,C){this.cartService=e,this.adminService=n,this.staticData=i,this.cs=d,this.router=g,this.ls=T,this._bs=C,this.goods=[],this.isAdmin=!1,this.isMinSumReached=!1,n.checkAdmin().subscribe(I=>this.isAdmin=I),e.cartUpdate().subscribe(I=>{this.goods=I}),e.isMinSumReached().subscribe(I=>{this.isMinSumReached=I}),C.setItem("\u041a\u043e\u0440\u0437\u0438\u043d\u0430")}ngOnInit(){const e=[this.staticData.getCartContent(),this.staticData.getCartVariables()],n=(0,W.D)(e).subscribe(([i,d])=>{this.cartContent=i,this.cartVariables=d,this.ls.removeSubscription(n)});this.ls.addSubscription(n)}navigateToBoxes(){this.router.navigate(["admin/boxes"])}clearCart(){this.cs.confirm({header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443?",accept:()=>{this.cartService.clearCart()}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.N),t.Y36(G.l),t.Y36(O.v),t.Y36(M.YP),t.Y36(D.F0),t.Y36(J.b),t.Y36(F.p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["flower-valley-cart"]],features:[t._Bn([z.xA])],decls:13,vars:10,consts:[["background","dark","headerTitle","\u041a\u043e\u0440\u0437\u0438\u043d\u0430",3,"isAdmin","buttonTemplate"],["class","banner",4,"ngIf"],[1,"info-text"],["class","contacts",4,"ngIf"],[1,"empty-message"],[4,"ngIf"],[3,"cartVariables","cartContent",4,"ngIf"],["class","important",4,"ngIf"],["background","dark","headerTitle","\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",4,"ngIf"],["boxesTemplate",""],[1,"banner"],[1,"banner__img"],["styleClass","flex align-items-center justify-content-center","src","assets/icons/doc-cart.svg"],[1,"banner__content"],[1,"banner__content_title"],[1,"banner__content_info"],[1,"contacts"],[1,"contacts__address"],[4,"ngFor","ngForOf"],[1,"contacts__phoneMail"],[3,"href",4,"ngFor","ngForOf"],[3,"href"],["styleClass","p-button-danger mb-4","label","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443",3,"onClick"],[3,"cartVariables","cartContent"],[1,"important"],[1,"important__header"],[1,"important__content"],[1,"important__content_flowers"],[1,"important__content_tulips"],[1,"important__content_pickup"],["background","dark","headerTitle","\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"],[3,"cartVariables"],["label","\u041a\u043e\u0440\u043e\u0431\u043a\u0438 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0435",3,"onClick"]],template:function(e,n){if(1&e&&(t.TgZ(0,"flower-valley-container",0),t.YNc(1,Me,9,7,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.YNc(4,Ie,14,5,"div",3),t.TgZ(5,"div",4),t.YNc(6,ke,2,0,"div",5),t.YNc(7,Ee,2,0,"div",5),t.qZA(),t.YNc(8,Se,1,2,"flower-valley-cart-goods",6),t.YNc(9,De,19,7,"div",7),t.qZA(),t.YNc(10,Be,2,1,"flower-valley-container",8),t.YNc(11,Ue,1,0,"ng-template",null,9,t.W1O)),2&e){const i=t.MAs(12);t.Q6J("isAdmin",n.isAdmin)("buttonTemplate",i),t.xp6(1),t.Q6J("ngIf",n.cartContent&&n.cartVariables),t.xp6(2),t.hij(" ",null==n.cartContent?null:n.cartContent.infoText," "),t.xp6(1),t.Q6J("ngIf",n.cartContent),t.xp6(2),t.Q6J("ngIf",!n.goods.length),t.xp6(1),t.Q6J("ngIf",n.goods.length),t.xp6(1),t.Q6J("ngIf",n.goods.length),t.xp6(1),t.Q6J("ngIf",n.cartContent),t.xp6(1),t.Q6J("ngIf",n.goods.length&&n.isMinSumReached)}},directives:[nt.e,h.O5,L.E,h.sg,N.zx,s,Oe],pipes:[V.K],styles:[".banner[_ngcontent-%COMP%]{background-color:#8fb600;border-radius:10px;display:inline-flex;align-items:center;padding:10px}.banner__img[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#ffffff1a;border-radius:10px;padding:10px;width:52px;height:52px}.banner__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:20px}.banner__content_title[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:140%;color:#fff}@media screen and (min-width: 1024px){.banner__content_title[_ngcontent-%COMP%]{font-size:24px}}.banner__content_info[_ngcontent-%COMP%]{font-weight:500;font-size:18px;line-height:140%;color:#ffffffb3;display:none}@media screen and (min-width: 1024px){.banner__content_info[_ngcontent-%COMP%]{display:block}}.info-text[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:140%;color:#3a3a3a;margin-top:30px;margin-bottom:20px}@media screen and (min-width: 1024px){.info-text[_ngcontent-%COMP%]{font-size:18px}}.contacts[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:14px;line-height:140%;margin-bottom:60px;flex-direction:column}@media screen and (min-width: 1024px){.contacts[_ngcontent-%COMP%]{flex-direction:row;font-size:18px}}.contacts__address[_ngcontent-%COMP%]{max-width:450px;margin-right:45px}.contacts__phoneMail[_ngcontent-%COMP%]{display:flex;align-items:unset;flex-direction:column;margin-top:15px}@media screen and (min-width: 1024px){.contacts__phoneMail[_ngcontent-%COMP%]{flex-direction:row;align-items:center;margin-top:unset}}.contacts__phoneMail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.contacts__phoneMail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contacts__phoneMail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#8fb600}.empty-message[_ngcontent-%COMP%]{font-weight:500;font-size:36px;line-height:100%;margin-top:-20px}.important[_ngcontent-%COMP%]{background-color:#8fb6001a;border:1px solid #8FB600;border-radius:10px;padding:30px;margin-top:40px;margin-bottom:-30px}.important__header[_ngcontent-%COMP%]{font-weight:500;font-size:36px;line-height:100%;text-transform:uppercase;color:#8fb600;margin-bottom:30px}.important__content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column}@media screen and (min-width: 1024px){.important__content[_ngcontent-%COMP%]{flex-direction:unset}}.important__content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.important__content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{font-weight:600;font-size:16px;line-height:100%;color:#3a3a3a;margin-bottom:10px}.important__content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-size:14px;line-height:120%;color:#3a3a3a}.important__content_flowers[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-weight:500}.important__content_tulips[_ngcontent-%COMP%]{padding:20px 0}@media screen and (min-width: 1024px){.important__content_tulips[_ngcontent-%COMP%]{padding:0 20px}}.important__content_tulips[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-weight:500}.important__content_pickup[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-weight:500}"]}),o})();var It=f(7216),Ne=f(330);const qe=function(){return{"margin-left":"15px"}};function Ye(o,r){1&o&&(t._UZ(0,"p-image",9),t.TgZ(1,"span"),t._uU(2,"C\u043a\u0430\u0447\u0430\u0442\u044c \u0441\u0447\u0435\u0442 \u0432 PDF"),t.qZA()),2&o&&(t.xp6(1),t.Akn(t.DdM(2,qe)))}function Je(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",8),t.NdJ("onClick",function(){t.CHM(e);const i=t.oxw();return i.window.open("https://375.ru/"+i.telepakId)}),t.YNc(1,Ye,3,3,"ng-template",7),t.qZA()}}function je(o,r){1&o&&(t._UZ(0,"p-image",10),t.TgZ(1,"span"),t._uU(2,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u041a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u043e\u0435 \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),t.qZA())}const Ve=function(){return{"margin-top":"20px",padding:"25px"}},ze=[{path:"",component:Fe,data:{title:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",description:"\u041a\u0443\u043f\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0438 \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443",keywords:"\u0446\u0432\u0435\u0442\u044b, \u0440\u0430\u0441\u0441\u0430\u0434\u044b, \u0440\u0430\u0441\u0441\u0430\u0434\u0430, \u0430\u0433\u0440\u043e\u0444\u0438\u0440\u043c\u0430, \u043a\u043e\u0440\u0437\u0438\u043d\u0430, \u043f\u043e\u043a\u0443\u043f\u043a\u0438, \u043a\u0443\u043f\u0438\u0442\u044c, \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}},{path:"download-invoice",component:(()=>{class o{constructor(e,n,i,d,g,T,C,I,w){this.priceConvert=e,this.route=n,this.orderService=i,this.offerService=d,this.productService=g,this.staticData=T,this.bpService=C,this.ls=I,this.ms=w,this.window=window,this.telepakId="",this.isFirmLoading=!1,n.queryParams.subscribe(E=>{this.telepakId=E.invoice,i.getItemById(E.order).subscribe(et=>{this.order=et})})}ngOnInit(){const e=this.staticData.getDownloadInvoiceContent().subscribe(n=>{this.content=n,this.ls.removeSubscription(e)});this.ls.addSubscription(e)}getOffer(){var e;this.isFirmLoading=!0,this.bpService.getFirmById((null===(e=this.order)||void 0===e?void 0:e.clientId)||"").subscribe(n=>{var i;let d="";d+=n.FullName,d+=`, ${n.Address}`,d+=`, \u0418\u041d\u041d: ${n.INN}`,n.KPP&&(d+=`, \u041a\u041f\u041f: ${n.KPP}`);const g=this.order.id,T=new Date(this.order.orderDate).toLocaleDateString()+"\u0433.";let C=0;const I=this.order.products.map(w=>(C+=w.count*w.price,[w.product.name,"\u0448\u0442.",w.count,this.priceConvert.transform(w.price,"two","none"),this.priceConvert.transform(w.count*w.price,"two","none")]));(null===(i=this.order)||void 0===i?void 0:i.deliveryPrice)&&(C+=this.order.deliveryPrice,I.push(["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430","-",1,this.priceConvert.transform(this.order.deliveryPrice,"two","none"),this.priceConvert.transform(this.order.deliveryPrice,"two","none")])),this.isFirmLoading=!1,this.offerService.getPDF(g,T,d,I,C)},()=>{this.isFirmLoading=!1,this.ms.add({severity:"error",summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",detail:"\u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Ne.H),t.Y36(D.gz),t.Y36(k.p),t.Y36(It.u),t.Y36(v.M),t.Y36(O.v),t.Y36(Q.k),t.Y36(J.b),t.Y36(M.ez))},o.\u0275cmp=t.Xpm({type:o,selectors:[["flower-valley-download-invoice"]],features:[t._Bn([It.u])],decls:10,vars:7,consts:[[1,"download-invoice"],[1,"download-invoice__content"],[1,"download-invoice__content_header"],[1,"download-invoice__content_text"],[1,"download-invoice__content_button"],["styleClass","flex justify-content-center",3,"onClick",4,"ngIf"],["styleClass","p-button-estimate w-12 flex justify-content-center",3,"loading","onClick"],["pTemplate","content"],["styleClass","flex justify-content-center",3,"onClick"],["styleClass","flex align-items-center","src","assets/icons/estimate-white.svg"],["styleClass","flex align-items-center","src","assets/icons/estimate.svg"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,Je,2,0,"p-button",5),t.TgZ(8,"p-button",6),t.NdJ("onClick",function(){return n.getOffer()}),t.YNc(9,je,3,0,"ng-template",7),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(null==n.content?null:n.content.title),t.xp6(2),t.hij(" ",null==n.content?null:n.content.text," "),t.xp6(2),t.Q6J("ngIf",n.telepakId),t.xp6(1),t.Akn(t.DdM(6,Ve)),t.Q6J("loading",!n.order||n.isFirmLoading))},directives:[h.O5,N.zx,M.jx,L.E],styles:[".download-invoice[_ngcontent-%COMP%]{width:auto;padding:100px 27px}@media screen and (min-width: 1024px){.download-invoice[_ngcontent-%COMP%]{width:90%;padding:100px 0;margin:auto}}@media screen and (min-width: 1230px){.download-invoice[_ngcontent-%COMP%]{width:1200px;margin:auto}}.download-invoice__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.download-invoice__content_header[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:20px;text-align:center;line-height:100%;color:#3a3a3a}@media screen and (min-width: 1024px){.download-invoice__content_header[_ngcontent-%COMP%]{font-size:60px;text-align:unset}}.download-invoice__content_text[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:60px;font-style:normal;font-weight:400;font-size:16px;line-height:140%;color:#787878;text-align:center}.download-invoice__content_button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}"]}),o})()}];let Ge=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[D.Bz.forChild(ze)],D.Bz]}),o})();var Qe=f(4466),Re=f(3275),Le=f(2145),He=f(3787),$e=f(5351),We=f(2993);let Ke=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[X.r,V.K],imports:[[h.ez,Ge,Qe.f,L.$,q.U$,y.u5,tt.d,Re.D,N.hJ,Y.T,yt.j,y.u5,y.UX,wt.nD,At.S,Le.WN,He.fx,Wt,We.L,$e.l,B.z,Tt._8,Zt.$,Ot.A]]}),o})()},3407:(ht,$,f)=>{f.d($,{g:()=>W,A:()=>t});var h=f(5e3),D=f(9808),z=f(3075);let W=(()=>{class A{constructor(O,M,J,F){this.el=O,this.ngModel=M,this.control=J,this.cd=F,this.onResize=new h.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(O){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(O){this.autoResize&&this.resize(O)}onBlur(O){this.autoResize&&this.resize(O)}resize(O){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(O||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return A.\u0275fac=function(O){return new(O||A)(h.Y36(h.SBq),h.Y36(z.On,8),h.Y36(z.a5,8),h.Y36(h.sBO))},A.\u0275dir=h.lG2({type:A,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(O,M){1&O&&h.NdJ("input",function(F){return M.onInput(F)})("focus",function(F){return M.onFocus(F)})("blur",function(F){return M.onBlur(F)}),2&O&&h.ekj("p-filled",M.filled)("p-inputtextarea-resizable",M.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),A})(),t=(()=>{class A{}return A.\u0275fac=function(O){return new(O||A)},A.\u0275mod=h.oAB({type:A}),A.\u0275inj=h.cJS({imports:[[D.ez]]}),A})()},7582:(ht,$,f)=>{function t(a,s,l,u){var m,c=arguments.length,p=c<3?s:null===u?u=Object.getOwnPropertyDescriptor(s,l):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(a,s,l,u);else for(var b=a.length-1;b>=0;b--)(m=a[b])&&(p=(c<3?m(p):c>3?m(s,l,p):m(s,l))||p);return c>3&&p&&Object.defineProperty(s,l,p),p}function nt(a,s,l,u){return new(l||(l=Promise))(function(p,m){function b(x){try{_(u.next(x))}catch(Z){m(Z)}}function P(x){try{_(u.throw(x))}catch(Z){m(Z)}}function _(x){x.done?p(x.value):function c(p){return p instanceof l?p:new l(function(m){m(p)})}(x.value).then(b,P)}_((u=u.apply(a,s||[])).next())})}f.d($,{gn:()=>t,mG:()=>nt}),"function"==typeof SuppressedError&&SuppressedError}}]);