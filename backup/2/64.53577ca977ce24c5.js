"use strict";(self.webpackChunkflowervalley=self.webpackChunkflowervalley||[]).push([[64],{6239:(S,f,l)=>{l.d(f,{g:()=>g});var _=l(5e3);let g=(()=>{class t{constructor(){this.draggedItem=null,this.draggedIndex=null,this.isDragDropFinished=!1,this.initialArray=[]}dragStart(c,m,p){this.draggedIndex=p,this.draggedItem=m,this.isDragDropFinished=!1,this.initialArray=[...c]}dragEnd(c){return this.isDragDropFinished||(c=this.initialArray),this.draggedItem=null,c}drop(c){if(this.draggedItem&&(this.draggedIndex||0===this.draggedIndex)){const m=[];for(let p=0;p<c.length;p++)m.push({sortOrder:p,id:c[p].id});return this.draggedItem=null,this.draggedIndex=null,this.isDragDropFinished=!0,m}}setPosition(c,m){return this.draggedItem&&(this.draggedIndex||0===this.draggedIndex)&&this.draggedIndex!==m&&(m<this.draggedIndex?(c.splice(this.draggedIndex,1),c.splice(m,0,this.draggedItem),this.draggedIndex=m):(c.splice(m+1,0,this.draggedItem),c.splice(this.draggedIndex,1),this.draggedIndex=m)),c}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6064:(S,f,l)=>{l.r(f),l.d(f,{ContactsModule:()=>mt});var _=l(9808),g=l(2535),t=l(5e3),x=l(7632),c=l(9020),m=l(695);let p=(()=>{class n extends m._{constructor(){super(...arguments),this.apiUrl="contact-photo"}getPhotos(){return this.http.get(`${this.baseUrl}/${this.apiUrl}s`)}}return n.\u0275fac=function(){let s;return function(i){return(s||(s=t.n5z(n)))(i||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var E=l(6239),T=l(2260),v=l(9783),D=l(2313),O=l(5055),k=l(3710),b=l(8850),C=l(9873),A=l(6483),y=l(845),I=l(9857);const P=function(n){return{"py-6":n}};function H(n,s){if(1&n&&(t.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),t._UZ(4,"p-image",30),t.TgZ(5,"span"),t._uU(6,"\u0410\u0434\u0440\u0435\u0441"),t.qZA()(),t.TgZ(7,"div",31),t._uU(8),t.qZA(),t.TgZ(9,"table")(10,"tr")(11,"td"),t._uU(12,"\u041f\u0440\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442:"),t.qZA(),t.TgZ(13,"td"),t._uU(14,"\xa0\xa0 "),t.TgZ(15,"a",32),t._UZ(16,"img",33),t.qZA()()()()(),t.TgZ(17,"div",34)(18,"div",35),t._UZ(19,"p-image",36),t.TgZ(20,"span"),t._uU(21,"\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b"),t.qZA()(),t.TgZ(22,"div",37)(23,"span"),t._uU(24),t.qZA()()()(),t._UZ(25,"div"),t.qZA()),2&n){const e=s.$implicit,i=s.first,o=s.index,a=t.oxw(2);t.Q6J("ngClass",t.VKq(4,P,!i)),t.xp6(8),t.hij(" ",e.address," "),t.xp6(7),t.Q6J("href",a.sanitize("yandexnavi://build_route_on_map?lat_to="+e.lonlan[o].lat+"&lon_to="+e.lonlan[o].lon),t.LSH),t.xp6(9),t.Oqu(e.workTime)}}function L(n,s){if(1&n&&(t.TgZ(0,"a",38),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.MGl("href","tel:",e,"",t.LSH),t.xp6(1),t.Oqu(e)}}function Z(n,s){if(1&n&&(t.TgZ(0,"flower-valley-container",6)(1,"div",7)(2,"table")(3,"tr")(4,"td")(5,"div",8),t.YNc(6,H,26,6,"div",9),t.qZA()(),t.TgZ(7,"td",10),t._UZ(8,"iframe",11),t.qZA()()(),t.TgZ(9,"div",12),t._UZ(10,"iframe",13),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"div",14)(13,"div",15)(14,"div",16),t._UZ(15,"p-image",17),t.TgZ(16,"span"),t._uU(17,"\u041d\u043e\u043c\u0435\u0440"),t.qZA()(),t.TgZ(18,"div",18)(19,"div",19),t.YNc(20,L,2,2,"a",20),t.qZA(),t.TgZ(21,"div",21)(22,"a",22),t._UZ(23,"span",23),t.TgZ(24,"div",24),t._uU(25,"What'sApp"),t.qZA()(),t.TgZ(26,"a",25),t._uU(27),t.qZA()()()()()()()),2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.getAddressData()),t.xp6(14),t.Q6J("ngForOf",e.contacts.phones),t.xp6(2),t.MGl("href","https://api.whatsapp.com/send/?phone=",e.contacts.whatsAppNumber,"",t.LSH),t.xp6(4),t.MGl("href","mailto:",e.contacts.mail,"",t.LSH),t.xp6(1),t.Oqu(e.contacts.mail)}}function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",44)(1,"flower-valley-files-upload",45),t.NdJ("uploaded",function(o){t.CHM(e);const a=t.oxw().$implicit;return t.oxw(2).editImage(o,a.id)}),t.qZA(),t.TgZ(2,"p-button",46),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).deleteImage(o.id)}),t.qZA()()}2&n&&(t.xp6(1),t.Q6J("multi",!1)("showOnlyButton",!0))}const F=function(){return{"border-radius":"10px",height:"100%","object-fit":"cover"}};function K(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("onDrop",function(){return t.CHM(e),t.oxw(2).drop()})("onDragEnter",function(){const a=t.CHM(e).index;return t.oxw(2).setPosition(a)})("onDragStart",function(){const o=t.CHM(e),a=o.$implicit,r=o.index;return t.oxw(2).dragStart(a,r)})("onDragEnd",function(){return t.CHM(e),t.oxw(2).dragEnd()}),t.TgZ(1,"p-image",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).openImage(a.id)}),t.qZA(),t.YNc(2,z,3,2,"div",43),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("src",e.img)("width",i.photosWidth)("imageStyle",t.DdM(4,F)),t.xp6(1),t.Q6J("ngIf",i.isAdmin)}}function V(n,s){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,K,3,5,"div",40),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.photos)}}function U(n,s){1&n&&t._UZ(0,"img",47),2&n&&t.Q6J("src",s.$implicit.img,t.LSH)}function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"flower-valley-files-upload",48),t.NdJ("uploaded",function(o){return t.CHM(e),t.oxw().addPhoto(o)}),t.qZA()}2&n&&t.Q6J("showOnlyButton",!0)("autoUpload",!0)}const W=[{path:"",component:(()=>{class n{constructor(e,i,o,a,r,d,u,h,dt){this._bs=e,this.adminService=i,this.contactService=o,this.sortOrder=a,this.staticData=r,this.cs=d,this.sanitizer=u,this.ls=h,this.ms=dt,this.isAdmin=!1,this.photosWidth="",this.mapWidth="",this.displayCustom=!1,this.activeIndex=0,this.photos=[],e.setItem("\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),i.checkAdmin().subscribe(ut=>this.isAdmin=ut)}updateWidth(){window.innerWidth<380?(this.photosWidth=(window.innerWidth-54).toString(),this.mapWidth=(window.innerWidth-54).toString()):window.innerWidth<550?(this.photosWidth="326",this.mapWidth=(window.innerWidth-54).toString()):(this.photosWidth="380",this.mapWidth="550")}sanitize(e){return this.sanitizer.bypassSecurityTrustUrl(e)}ngOnInit(){this.updateWidth();const e=this.staticData.getContactsContent().subscribe(i=>{this.contacts=i,this.ls.removeSubscription(e)});this.ls.addSubscription(e),this.getPhotos()}getPhotos(){const e=this.contactService.getPhotos().subscribe(i=>{this.photos=i.sort((o,a)=>o.sortOrder-a.sortOrder),this.ls.removeSubscription(e)});this.ls.addSubscription(e)}openImage(e){this.activeIndex=this.photos.findIndex(i=>i.id===e),this.displayCustom=!0}addPhoto(e){const i=new FormData;e.map(o=>{i.append("img",o),this.contactService.addItem(i).subscribe(()=>{this.getPhotos()})})}editImage(e,i){const o=new FormData;o.append("img",e[0]),this.contactService.updateItem(o,i).subscribe(()=>{const a=e[0].objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[0])),r=this.photos.findIndex(d=>d.id===i);this.photos[r].img=a,this.ms.add({severity:"success",summary:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430"})})}deleteImage(e){this.cs.confirm({header:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e?",accept:()=>{this.contactService.deleteItem(e).subscribe(()=>{const i=this.photos.findIndex(o=>o.id===e);this.photos.splice(i,1),this.ms.add({severity:"success",summary:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0430"})})}})}dragStart(e,i){this.sortOrder.dragStart(this.photos,e,i)}dragEnd(){this.photos=this.sortOrder.dragEnd(this.photos)}drop(){this.contactService.setOrder(this.sortOrder.drop(this.photos)).subscribe()}setPosition(e){this.photos=this.sortOrder.setPosition(this.photos,e)}getAddressData(){const e=[];return this.contacts&&this.contacts.address.map((i,o)=>{e.push({lonlan:[{id:0,lat:"55.594982",lon:"37.987759"},{id:1,lat:"55.704222",lon:"36.847373"}],address:i,workTime:this.contacts&&this.contacts.workTime[o]?this.contacts.workTime[o]:"",mapImage:this.contacts&&this.contacts.mapImages[o]?this.contacts.mapImages[o]:""})}),e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.p),t.Y36(c.l),t.Y36(p),t.Y36(E.g),t.Y36(T.v),t.Y36(v.YP),t.Y36(D.H7),t.Y36(O.b),t.Y36(v.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["flower-valley-contacts"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.updateWidth()},!1,t.Jf7)},decls:7,vars:11,consts:[["background","dark","headerTitle","\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",4,"ngIf"],["background","dark","headerTitle","\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",3,"isAdmin","buttonTemplate"],["class","grid",4,"ngIf"],[3,"value","visible","activeIndex","circular","fullScreen","showItemNavigators","showThumbnails","visibleChange","activeIndexChange"],["pTemplate","item"],["addPhotos",""],["background","dark","headerTitle","\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"],[1,"contacts"],[1,"contacts__info"],["class","data-container",3,"ngClass",4,"ngFor","ngForOf"],["valign","top","id","pcmap"],["src","https://yandex.ru/map-widget/v1/?um=constructor%3A4c0bbfd7735e41af052a6d859dbc34f33d7e812dee62f1aaa7fa5c4d328e2d4e&source=constructor","width","400","height","300","frameborder","0"],["id","mobmap"],["src","https://yandex.ru/map-widget/v1/?um=constructor%3A4c0bbfd7735e41af052a6d859dbc34f33d7e812dee62f1aaa7fa5c4d328e2d4e&source=constructor","width","100%","height","300","frameborder","0"],[1,"contacts__map"],[1,"contacts__map_phones"],[1,"contacts__map_phones-title"],["styleClass","flex align-items-center mr-2","src","assets/icons/phone.svg","width","15px"],[1,"contacts__map_phones-content","grid"],[1,"col-6","flex","flex-column"],["class","contacts__map_phones-content_item",3,"href",4,"ngFor","ngForOf"],[1,"col-6","flex","flex-column","justify-content-center"],["target","_blank",1,"whats-app-button",3,"href"],[1,"pi","pi-whatsapp"],[1,"pl-1"],["type","mail",1,"contacts__map_mail",3,"href"],[1,"data-container",3,"ngClass"],[1,"contacts__info_data"],[1,"contacts__info_address"],[1,"contacts__info_address-title"],["styleClass","flex align-items-center mr-2","src","assets/icons/map-grey.svg","width","15px"],[1,"contacts__info_address-content"],[3,"href"],["src","assets/images/yn.png","height","28","border","0"],[1,"contacts__info_timing","pt-4"],[1,"contacts__info_timing-title"],["styleClass","flex align-items-center mr-2","src","assets/icons/clock.svg","width","15px"],[1,"contacts__info_timing-content"],[1,"contacts__map_phones-content_item",3,"href"],[1,"grid"],["pDraggable","contactsPhoto","dragEffect","move","pDroppable","contactsPhoto","class","photo col-12 lg:col-6 xl:col-4 flex justify-content-center",3,"onDrop","onDragEnter","onDragStart","onDragEnd",4,"ngFor","ngForOf"],["pDraggable","contactsPhoto","dragEffect","move","pDroppable","contactsPhoto",1,"photo","col-12","lg:col-6","xl:col-4","flex","justify-content-center",3,"onDrop","onDragEnter","onDragStart","onDragEnd"],["styleClass","cursor-pointer",3,"src","width","imageStyle","click"],["class","hover",4,"ngIf"],[1,"hover"],["label","\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e",3,"multi","showOnlyButton","uploaded"],["styleClass","p-button-danger ml-2","icon","pi pi-trash",3,"onClick"],[2,"width","100%","display","block",3,"src"],["label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",3,"showOnlyButton","autoUpload","uploaded"]],template:function(e,i){if(1&e&&(t.YNc(0,Z,28,5,"flower-valley-container",0),t.TgZ(1,"flower-valley-container",1),t.YNc(2,V,2,1,"div",2),t.qZA(),t.TgZ(3,"p-galleria",3),t.NdJ("visibleChange",function(a){return i.displayCustom=a})("activeIndexChange",function(a){return i.activeIndex=a}),t.YNc(4,U,1,1,"ng-template",4),t.qZA(),t.YNc(5,R,1,2,"ng-template",null,5,t.W1O)),2&e){const o=t.MAs(6);t.Q6J("ngIf",i.contacts),t.xp6(1),t.Q6J("isAdmin",i.isAdmin)("buttonTemplate",o),t.xp6(1),t.Q6J("ngIf",i.photos.length),t.xp6(1),t.Q6J("value",i.photos)("visible",i.displayCustom)("activeIndex",i.activeIndex)("circular",!0)("fullScreen",!0)("showItemNavigators",!0)("showThumbnails",!1)}},directives:[_.O5,k.e,_.sg,_.mk,b.E,C._l,C.bK,A.o,y.zx,I.dz,v.jx],styles:[".contacts[_ngcontent-%COMP%], .contacts__info[_ngcontent-%COMP%], .contacts__info[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 1024px){.contacts__info[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]{flex-direction:row}}.contacts__info_address-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500;font-size:18px;line-height:140%;color:#787878;text-transform:uppercase}.contacts__info_address-content[_ngcontent-%COMP%]{font-weight:500;font-size:18px;line-height:140%;color:#3a3a3a}@media screen and (min-width: 1024px){.contacts__info_address-content[_ngcontent-%COMP%]{font-size:24px}}.contacts__info_timing-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500;font-size:18px;line-height:140%;color:#787878;text-transform:uppercase}.contacts__info_timing-content[_ngcontent-%COMP%]{font-weight:500;font-size:18px;line-height:140%;color:#3a3a3a;display:flex;flex-direction:column}@media screen and (min-width: 1024px){.contacts__info_timing-content[_ngcontent-%COMP%]{font-weight:400;font-size:24px}}.contacts__info_timing-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.contacts__map[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (min-width: 1024px){.contacts__map[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}}.contacts__map_phones-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500;font-size:18px;line-height:140%;color:#787878;text-transform:uppercase}.contacts__map_phones-content[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:40px}.contacts__map_phones-content[_ngcontent-%COMP%]   a.contacts__map_phones-content_item[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:120%;color:#3a3a3a;text-decoration:none}@media screen and (min-width: 1024px){.contacts__map_phones-content[_ngcontent-%COMP%]   a.contacts__map_phones-content_item[_ngcontent-%COMP%]{font-size:18px}}@media screen and (min-width: 1230px){.contacts__map_phones-content[_ngcontent-%COMP%]   a.contacts__map_phones-content_item[_ngcontent-%COMP%]{font-size:21px}}.contacts__map_phones-content[_ngcontent-%COMP%]   a.contacts__map_phones-content_item[_ngcontent-%COMP%]:hover{text-decoration:underline}.contacts__map_phones-content[_ngcontent-%COMP%]   a.contacts__map_phones-content_item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.contacts__map_phones-content[_ngcontent-%COMP%]   .whats-app-button[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;max-width:200px;display:flex;align-items:center;justify-content:center;background-color:#8fb6001a;border-radius:5px;color:#8fb600!important;font-weight:500;font-size:15.4978px;line-height:19px}.contacts__map_phones-content[_ngcontent-%COMP%]   .whats-app-button[_ngcontent-%COMP%]:hover{cursor:pointer;outline:1px solid #8FB600;text-decoration:none!important}.contacts__map_mail[_ngcontent-%COMP%]{padding-top:20px;font-weight:500;font-size:16px;line-height:120%;color:#8fb600;text-decoration:underline}@media screen and (min-width: 1024px){.contacts__map_mail[_ngcontent-%COMP%]{font-size:18px}}@media screen and (min-width: 1230px){.contacts__map_mail[_ngcontent-%COMP%]{font-size:21px}}.contacts__map[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{margin-top:20px;border:none;border-radius:10px}.photo[_ngcontent-%COMP%]{position:relative}.photo[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{display:none;position:absolute;justify-content:flex-end;top:0;right:0;width:100%;padding:10px;background:rgba(255,255,255,.5)}.photo[_ngcontent-%COMP%]:hover   .hover[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 600px){#pcmap[_ngcontent-%COMP%]{visibility:hidden;clear:both;float:left;margin:10px auto 5px 20px;width:28%;display:none}}@media screen and (min-width: 600px){#mobmap[_ngcontent-%COMP%]{visibility:hidden;clear:both;float:left;margin:10px auto 5px 20px;width:28%;display:none}}"]}),n})(),data:{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",keywords:"\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b, \u0440\u0430\u0441\u0441\u0430\u0434\u0430, \u0446\u0432\u0435\u0442\u044b, \u043a\u0430\u0440\u0442\u044b, \u0434\u043e\u0440\u043e\u0433\u0430, \u043f\u0443\u0442\u044c, \u043c\u0430\u0440\u0448\u0440\u0443\u0442, \u0442\u0435\u043b\u0435\u0444\u043e\u043d, \u043f\u043e\u0447\u0442\u0430",description:"\u041f\u043e\u043b\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0410\u0433\u0440\u043e\u0444\u0438\u0440\u043c\u044b - \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u044b, \u043f\u043e\u0447\u0442\u0430, \u0430\u0434\u0440\u0435\u0441\u0430, \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b"}}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(W)],g.Bz]}),n})();var $=l(4466),J=l(5787),w=l(4119);let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v.Lk],imports:[[_.ez,g.Bz,J.T,w.z],g.Bz,w.z]}),n})(),mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.ez,N,$.f,b.$,I.kT,y.hJ,ct,C._t]]}),n})()}}]);