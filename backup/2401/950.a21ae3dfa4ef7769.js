"use strict";(self.webpackChunkflowervalley=self.webpackChunkflowervalley||[]).push([[950],{4752:(f,m,p)=>{p.d(m,{k:()=>t});var d=p(695),a=p(5e3);let t=(()=>{class u extends d._{constructor(){super(...arguments),this.apiUrl="box"}getItems(){return this.http.get(`${this.baseUrl}/${this.apiUrl}/list`)}}return u.\u0275fac=function(){let r;return function(c){return(r||(r=a.n5z(u)))(c||u)}}(),u.\u0275prov=a.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},9950:(f,m,p)=>{p.r(m),p.d(m,{BoxesModule:()=>S});var d=p(9808),a=p(2535),t=p(5e3),u=p(4752),r=p(9783),g=p(3710),c=p(4255),_=p(3075),b=p(1424),h=p(7780),x=p(845);function C(n,i){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"\u0412\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u0426\u0435\u043d\u0430"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"),t.qZA()())}function B(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",13),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().$implicit.name=l}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.name)}}function v(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.name," ")}}function T(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p-inputNumber",14),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().$implicit.volume=l}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.volume)("min",1)("required",!0)}}function E(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.volume," ")}}function Z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p-inputNumber",14),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().$implicit.price=l}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("ngModel",e.price)("min",1)("required",!0)}}function M(n,i){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.price," ")}}function A(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().onRowEditInit(l)}),t.qZA()}}function w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().onRowEditSave(l)}),t.qZA()}}function y(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(),s=l.$implicit,U=l.rowIndex;return t.oxw().onRowEditCancel(s,U)}),t.qZA()}}function I(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"span",19),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().deleteItem(l.id)}),t.qZA()()}}function N(n,i){if(1&n&&(t.TgZ(0,"tr",5)(1,"td")(2,"p-cellEditor"),t.YNc(3,B,1,1,"ng-template",6),t.YNc(4,v,1,1,"ng-template",7),t.qZA()(),t.TgZ(5,"td")(6,"p-cellEditor"),t.YNc(7,T,1,3,"ng-template",6),t.YNc(8,E,1,1,"ng-template",7),t.qZA()(),t.TgZ(9,"td")(10,"p-cellEditor"),t.YNc(11,Z,1,3,"ng-template",6),t.YNc(12,M,1,1,"ng-template",7),t.qZA()(),t.TgZ(13,"td")(14,"div")(15,"div",8),t.YNc(16,A,1,0,"span",9),t.YNc(17,w,1,0,"button",10),t.YNc(18,y,1,0,"button",11),t.qZA(),t.YNc(19,I,2,0,"div",12),t.qZA()()()),2&n){const o=i.editing;t.Q6J("pEditableRow",i.$implicit),t.xp6(16),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",!o)}}function J(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",20),t.NdJ("onClick",function(){return t.CHM(e),t.oxw().navigateToAddBox()}),t.qZA()}}const R=[{path:"",component:(()=>{class n{constructor(e,o,l){this.boxService=e,this.ms=o,this.router=l,this.boxes=[],this.clonedBoxes={},this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.boxService.getItems().subscribe(e=>{this.boxes=e,this.isLoading=!1})}deleteItem(e){this.isLoading=!0,this.boxService.deleteItem(e).subscribe(()=>{const o=this.boxes.findIndex(l=>l.id===e);this.boxes.splice(o,1),this.isLoading=!1},({error:o})=>{this.ms.add({severity:"error",summary:o.message,detail:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0434\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u0440\u043e\u0431\u043a\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u0430"}),this.isLoading=!1})}navigateToAddBox(){this.router.navigate(["admin/add/box"])}onRowEditInit(e){this.clonedBoxes[e.id]=Object.assign({},e)}onRowEditSave(e){this.isLoading=!0,this.boxService.updateItem(e).subscribe(()=>{delete this.clonedBoxes[e.id],this.isLoading=!1})}onRowEditCancel(e,o){this.boxes[o]=this.clonedBoxes[e.id],delete this.clonedBoxes[e.id]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.k),t.Y36(r.ez),t.Y36(a.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["flower-valley-boxes"]],decls:6,vars:4,consts:[["headerTitle","\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043e\u0447\u043d\u044b\u0435 \u043a\u043e\u0440\u043e\u0431\u043a\u0438",3,"isAdmin","buttonTemplate"],["dataKey","id","editMode","row",3,"value","loading"],["pTemplate","header"],["pTemplate","body"],["addBox",""],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"edit"],["pInitEditableRow","","class","pi pi-pencil cursor-pointer",3,"click",4,"ngIf"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success p-mr-2",3,"click",4,"ngIf"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["class","trash",4,"ngIf"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],[3,"ngModel","min","required","ngModelChange"],["pInitEditableRow","",1,"pi","pi-pencil","cursor-pointer",3,"click"],["pButton","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","p-mr-2",3,"click"],["pButton","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],[1,"trash"],[1,"pi","pi-trash","cursor-pointer",3,"click"],["label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u0440\u043e\u0431\u043a\u0443",3,"onClick"]],template:function(e,o){if(1&e&&(t.TgZ(0,"flower-valley-container",0)(1,"p-table",1),t.YNc(2,C,9,0,"ng-template",2),t.YNc(3,N,20,5,"ng-template",3),t.qZA()(),t.YNc(4,J,1,0,"ng-template",null,4,t.W1O)),2&e){const l=t.MAs(5);t.Q6J("isAdmin",!0)("buttonTemplate",l),t.xp6(1),t.Q6J("value",o.boxes)("loading",o.isLoading)}},directives:[g.e,c.iA,r.jx,c.D$,c.YL,_.Fj,b.o,_.Q7,_.JJ,_.On,h.R,d.O5,c.Pv,x.Hq,c.U1,c.wT,x.zx],styles:[".p-datatable-tbody td   input{width:200px}  .p-datatable-tbody td:last-child>div{display:flex;justify-content:center}  .p-datatable-tbody td:last-child>div .edit{color:#8fb600}  .p-datatable-tbody td:last-child>div .trash{margin-left:20px;color:#ea3b15}"]}),n})()}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.Bz.forChild(R)],a.Bz]}),n})();var $=p(4466),F=p(2993);let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,Y,$.f,c.U$,_.u5,F.L,x.hJ,b.j]]}),n})()}}]);